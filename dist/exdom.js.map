{"version":3,"file":"exdom.js","sources":["../src/util.js","../src/events.js","../src/forms.js","../src/http.js","../src/render.js","../src/storage.js"],"sourcesContent":["export function getRefs(els, prefix, inputRefs) {\n  const refs = inputRefs || {};\n\n  forEach(els, el => {\n    if (el.className) {\n      el.className.split(/\\s+/g).map(className => {\n        let refName;\n\n        if (prefix) {\n          if (className.indexOf(prefix) !== 0) return;\n          refName = camelCase(className.slice(prefix.length));\n        } else {\n          refName = camelCase(className);\n        }\n\n        if (!refs[refName]) {\n          refs[refName] = [el];\n        } else {\n          refs[refName].push(el);\n        }\n      });\n    }\n\n    getRefs(el.children, prefix, refs);\n  });\n\n  return refs;\n}\n\nexport function getClosestOfClass(els, className) {\n  const el = firstOf(els);\n\n  let current = el;\n  while (current) {\n    if (hasClass(current, className)) return current;\n    current = current.parentNode;\n  }\n}\n\nexport function contain(els, target) {\n  const els_ = listOf(els);\n\n  for (let i = 0, l = els_.length; i < l; ++i) {\n    let current = target;\n    while (current) {\n      if (current === els_[i]) return true;\n      current = current.parentNode;\n    }\n  }\n\n  return false;\n}\n\nexport function escapeHtml(target, text) {\n  const tempEl = getTempEl(target);\n  tempEl.innerText = text;\n  return tempEl.innerHTML;\n}\n\nexport function parseEl(target, html) {\n  if (typeof html === \"string\") {\n    const tempEl = getTempEl(target);\n    tempEl.innerHTML = html;\n    return tempEl.firstElementChild;\n  }\n\n  return html;\n}\n\nexport function getWindow(els) {\n  const document = getDocument(els);\n  return document.defaultView || document.parentWindow;\n}\n\nexport function getDocument(els) {\n  return (\n    els.ownerDocument ||\n    els.document ||\n    (els.documentElement && els) ||\n    els[0].ownerDocument ||\n    els[0].document ||\n    (els[0].documentElement && els[0])\n  );\n}\n\nexport function hasClass(els, className) {\n  const tmp = map(els, el => (el.className ? el.className.split(/\\s+/g) : []));\n  return (\n    tmp.filter(classNames => classNames.indexOf(className) >= 0).length ===\n    tmp.length\n  );\n}\n\nexport const BREAK = {};\n\nexport function forEach(els, fn) {\n  const els_ = listOf(els);\n\n  for (let i = 0, l = els_.length; i < l; ++i) {\n    if (fn(els_[i], i) === BREAK) return els_;\n  }\n\n  return els_;\n}\n\nexport function map(els, fn) {\n  const els_ = listOf(els);\n  const result = [];\n\n  for (let i = 0, l = els_.length; i < l; ++i) {\n    result.push(fn(els_[i], i));\n  }\n\n  return result;\n}\n\nexport function filter(els, fn) {\n  const els_ = listOf(els);\n  const result = [];\n\n  for (let i = 0, l = els_.length; i < l; ++i) {\n    const el = els_[i];\n    if (fn(el, i)) result.push(el);\n  }\n\n  return result;\n}\n\nexport function indexOf(els, el) {\n  const els_ = listOf(els);\n\n  for (let i = 0, l = els_.length; i < l; ++i) {\n    if (els_[i] === el) return i;\n  }\n\n  return -1;\n}\n\nexport function listOf(els) {\n  if (!els) return [];\n  if (els.addEventListener) return [els];\n  return els;\n}\n\nexport function firstOf(els) {\n  if (!els) return;\n  if (els.addEventListener) return els;\n  return els[0];\n}\n\n//\n\nlet tempElMap = new Map();\n\nfunction getTempEl(target) {\n  let tempEl = tempElMap.get(target.tagName);\n\n  if (!tempEl) {\n    const document = target.ownerDocument || target[0].ownerDocument;\n    tempEl = document.createElement(target.tagName);\n    tempElMap.set(target.tagName, tempEl);\n  }\n\n  return tempEl;\n}\n\nfunction camelCase(str) {\n  return str.replace(/-+./g, m => m.slice(m.length - 1).toUpperCase());\n}\n","import { forEach, getWindow, getClosestOfClass, contain } from \"./util\";\n\nexport function observe(els, options, extra) {\n  const o = {\n    ...parseOptions(options),\n    ...parseOptions(extra)\n  };\n\n  let hasVolatile = false;\n\n  const typeNames = o.types || parseArgumentNames(o.handler);\n  const types = typeNames.map(name => {\n    const full = name[0] === \"_\";\n    const volatile = full || name[0] === \"$\";\n\n    if (volatile) hasVolatile = true;\n\n    return {\n      name: volatile ? name.slice(1) : name,\n      volatile,\n      full\n    };\n  });\n\n  forEach(els, el => {\n    const cache = [];\n    cache.length = types.length;\n\n    let deferTimeout;\n\n    types.forEach((type, index) => {\n      listen(el, type.name, e => {\n        if (type.volatile) {\n          // delegation\n          if (o.targetClass && !getClosestOfClass(e.target, o.targetClass)) {\n            return;\n          } else if (o.target && !contain(o.target, e.target)) {\n            return;\n          }\n        } else {\n          cache[index] = e.detail;\n        }\n\n        if (!hasVolatile || type.volatile) {\n          if (o.defer) {\n            clearTimeout(deferTimeout);\n            deferTimeout = setTimeout(callHandler, o.defer);\n          } else {\n            callHandler();\n          }\n        }\n\n        function callHandler() {\n          if (type.volatile) {\n            const args = cache.slice(0);\n            args[index] = type.full ? e : e.detail;\n            o.handler.apply(null, args);\n          } else {\n            o.handler.apply(null, cache);\n          }\n        }\n      });\n    });\n  });\n}\n\nexport function relay(els, type, targets) {\n  listen(els, type, e => {\n    send(targets, type, e.detail);\n  });\n}\n\nexport function listen(els, type, listener, options) {\n  forEach(els, el => {\n    el.addEventListener(\n      type,\n      e => {\n        try {\n          return listener(e);\n        } catch (ex) {\n          emit(el, \"error\", ex);\n        }\n      },\n      options || false\n    );\n  });\n}\n\nexport function send(els, type, detail) {\n  if (!els || (!els.addEventListener && els.length === 0)) return;\n\n  const { CustomEvent } = getWindow(els);\n\n  dispatch(\n    els,\n    new CustomEvent(type, {\n      detail: arguments.length === 2 ? {} : detail,\n      bubbles: false\n    })\n  );\n}\n\nexport function emit(els, type, detail) {\n  if (!els || (!els.addEventListener && els.length === 0)) return;\n\n  const { CustomEvent } = getWindow(els);\n\n  dispatch(\n    els,\n    new CustomEvent(type, {\n      detail: arguments.length === 2 ? {} : detail,\n      bubbles: true\n    })\n  );\n}\n\nexport function dispatch(els, e) {\n  forEach(els, el => {\n    el.dispatchEvent(e);\n  });\n}\n\n//\n\nfunction parseOptions(options) {\n  if (typeof options === \"string\") return { types: split(options) };\n  if (Array.isArray(options)) return { types: options };\n  if (typeof options === \"function\") return { handler: options };\n  if (!options) return {};\n  if (typeof options.types === \"string\")\n    return {\n      ...options,\n      types: split(options.types)\n    };\n  return options;\n}\n\nfunction parseArgumentNames(fn) {\n  const m = fn\n    .toString()\n    .match(/^function[^(]*\\(([^)]*)\\)|^\\(([^)]*)\\)|^([a-zA-Z$_][^=]*)/);\n  const args = m[1] || m[2] || m[3];\n\n  return split(args).filter(arg => !!arg);\n}\n\nfunction split(csv) {\n  return csv.split(\",\").map(v => v.trim());\n}\n","import { forEach, firstOf } from \"./util\";\n\nexport function getValue(els) {\n  const el = firstOf(els);\n\n  if (!el) return;\n\n  switch (el.tagName === \"INPUT\" ? el.type : el.tagName) {\n    case \"checkbox\":\n    case \"radio\":\n      return !!el.checked;\n    default:\n      // text, hidden, password, textarea, etc.\n      return el.value || \"\";\n  }\n}\n\nexport function setValue(els, value) {\n  forEach(els, el => {\n    const tagName = el.tagName;\n    const val = toValue(value);\n    let elValue, multiple;\n\n    switch (tagName === \"INPUT\" ? el.type : tagName) {\n      case \"checkbox\":\n      case \"radio\":\n        elValue = el.getAttribute(\"value\") || \"on\";\n        el.checked = Array.isArray(val)\n          ? value.indexOf(elValue) >= 0\n          : val === elValue;\n        break;\n      case \"SELECT\":\n        multiple = el.multiple && Array.isArray(val);\n\n        forEach(el.options, option => {\n          const optionValue = option.value || option.textContent;\n          option.selected = multiple\n            ? value.indexOf(optionValue) >= 0\n            : value + \"\" == optionValue;\n        });\n\n        break;\n      case \"OPTION\":\n      case \"file\":\n      case \"image\":\n      case \"reset\":\n        break;\n\n      default:\n        // text, hidden, password, textarea, etc.\n        if (el.value !== val + \"\") el.value = val;\n        break;\n    }\n  });\n}\n\nexport function toValue(value) {\n  if (value === null || value === undefined || value === false) return \"\";\n  if (value === true) return \"on\";\n  if (Array.isArray(value)) return value.map(toValue);\n  return value + \"\";\n}\n","import { emit } from \"./events\";\nimport { getWindow } from \"./util\";\n\nexport function request(els, options, extra) {\n  const { fetch } = getWindow(els);\n\n  const options_ = typeof options === \"string\" ? { url: options } : options;\n\n  const req = {\n    read: \"auto\",\n    ...options_,\n    ...extra,\n    headers: buildHeaders(els, options_, extra),\n    body: buildBody(els, options_, extra)\n  };\n\n  emit(els, \"request\", req);\n\n  let res, body;\n\n  return fetch(req.url, req)\n    .then(r => {\n      res = r;\n\n      emit(els, \"response\", { req, res });\n\n      if (!req.read) return;\n\n      return readResponse(els, res, req.read).then(b => {\n        body = b;\n        emit(els, \"fullResponse\", { req, res, body });\n      });\n    })\n    .then(() => {\n      if (res.status >= 400) {\n        throw new Error(`Status code error ${res.status}`);\n      }\n\n      emit(els, \"requestDone\");\n\n      return { req, res, body };\n    })\n    .catch(err => {\n      err.req = req;\n      err.res = res;\n      err.body = body;\n\n      emit(els, \"requestError\", err);\n      emit(els, \"requestDone\");\n\n      throw err;\n    });\n}\n\nexport function buildHeaders(context, options, extra) {\n  const { Headers, FormData } = getWindow(context);\n\n  const req = { ...options, ...extra };\n\n  const headers = new Headers();\n\n  if (req.read === \"json\" || req.read === \"application/json\") {\n    headers.set(\"Accept\", \"application/json\");\n  }\n\n  if (typeof req.body === \"object\" && !(req.body instanceof FormData)) {\n    headers.set(\"Content-Type\", \"application/json\");\n  }\n\n  if (options && options.headers) {\n    Object.keys(options.headers).forEach(key => {\n      headers.set(key, options.headers[key]);\n    });\n  }\n\n  if (extra && extra.headers) {\n    Object.keys(extra.headers).forEach(key => {\n      headers.set(key, extra.headers[key]);\n    });\n  }\n\n  return headers;\n}\n\nexport function buildBody(context, options, extra) {\n  const { FormData } = getWindow(context);\n\n  const body = (extra && extra.body) || (options && options.body);\n\n  if (typeof body === \"object\" && !(body instanceof FormData)) {\n    return JSON.stringify(options.body);\n  }\n\n  return body;\n}\n\nexport function readResponse(context, res, contentType) {\n  const c =\n    contentType === \"auto\"\n      ? (res.headers.get(\"content-type\") || \"\").toLowerCase()\n      : contentType;\n\n  switch (c.replace(/;.*$/, \"\")) {\n    case \"blob\":\n      return res.blob();\n    case \"formData\":\n    case \"application/x-www-form-urlencoded\":\n      return res.formData();\n    case \"json\":\n    case \"application/json\":\n      return res.json();\n    case \"text\":\n    case \"application/javascript\":\n    case \"text/css\":\n    case \"text/csv\":\n    case \"text/calendar\":\n    case \"text/html\":\n    case \"text/javascript\":\n    case \"text/plain\":\n      return res.text();\n    default:\n      return res.arrayBuffer();\n  }\n}\n","import { forEach, firstOf, parseEl, getWindow } from \"./util\";\n\nexport function startChildren(els, offset) {\n  forEach(els, el => {\n    el.__appendOffset = offset || 0;\n  });\n}\n\nexport function keepChildren(els, n) {\n  forEach(els, el => {\n    el.__appendOffset =\n      typeof el.__appendOffset === \"number\" ? el.__appendOffset + n : n;\n  });\n}\n\nexport function appendChildren(els, optionsArray, baseOptions) {\n  const el = firstOf(els);\n\n  if (!el) return [];\n\n  return optionsArray.map(options => appendChild(el, baseOptions, options));\n}\n\nexport function appendChild(els, options, extra) {\n  const el = firstOf(els);\n\n  if (!el) return;\n\n  const o = {\n    ...(typeof options === \"string\" ? { template: options } : options),\n    ...(typeof extra === \"string\" ? { template: extra } : extra)\n  };\n\n  const compat = o.compatible || compatible;\n  const { CustomEvent } = getWindow(el);\n  const proto = getProto(el, o.template);\n\n  // reconciliation\n  const offsetChild = el.children[el.__appendOffset || 0];\n  let child = offsetChild;\n\n  if (!offsetChild || !compat(offsetChild, proto)) {\n    child = cloneProto(proto);\n    el.insertBefore(child, offsetChild);\n  }\n\n  // init child once\n  if (o.init && !child.__init) {\n    child.__init = true;\n    o.init(child);\n  }\n\n  // pass data, if any\n  if (o.pass) {\n    child.dispatchEvent(\n      new CustomEvent(\"pass\", {\n        detail: o.pass,\n        bubbles: false\n      })\n    );\n  }\n\n  el.__appendOffset =\n    typeof el.__appendOffset === \"number\" ? el.__appendOffset + 1 : 1;\n\n  return child;\n}\n\nexport function endChildren(els) {\n  let Event;\n\n  forEach(els, el => {\n    if (!Event) Event = getWindow(el).Event;\n\n    while (el.children.length > el.__appendOffset) {\n      el.lastElementChild.dispatchEvent(\n        new Event(\"destroy\", {\n          bubbles: false\n        })\n      );\n      el.removeChild(el.lastElementChild);\n    }\n\n    el.__appendOffset = 0;\n  });\n}\n\nexport function setText(els, text) {\n  forEach(els, el => {\n    if (el.__text !== text) {\n      el.__text = text;\n      // safe guard if setText() and setHtml() are used on the same element\n      el.__html = {};\n      el.innerText = text;\n    }\n  });\n}\n\nexport function setHtml(els, html) {\n  forEach(els, el => {\n    if (el.__html !== html) {\n      el.__html = html;\n      // see above\n      el.__text = {};\n      el.innerHTML = html;\n    }\n  });\n}\n\nexport function setAttr(els, name, value) {\n  forEach(els, el => {\n    if (!el.__attr) el.__attr = {};\n    if (!el.__attr.hasOwnProperty(name) || el.__attr[name] !== value) {\n      el.__attr[name] = value;\n      if (typeof value === \"undefined\" || value === null) {\n        el.removeAttribute(name, value);\n      } else {\n        el.setAttribute(name, value);\n      }\n    }\n  });\n}\n\nexport function setClass(els, classNames, condition) {\n  const list = classNames.split(/\\s+/g);\n\n  forEach(els, el => {\n    let changed = false;\n    const result = el.className.split(/\\s+/g).filter(className => !!className);\n    list.forEach(className => {\n      const index = result.indexOf(className);\n      if (condition && index === -1) {\n        result.push(className);\n        changed = true;\n      } else if (!condition && index >= 0) {\n        result.splice(index, 1);\n        changed = true;\n      }\n    });\n    if (changed) el.className = result.join(\" \");\n  });\n}\n\n//\n\nfunction compatible(el, proto) {\n  if (el.__proto) return el.__proto === proto;\n  return el.tagName === proto.tagName && el.className === proto.className;\n}\n\nfunction cloneProto(proto) {\n  const el = proto.cloneNode(true);\n  el.__proto = proto;\n\n  return el;\n}\n\nconst protoCache = new Map();\n\nfunction getProto(target, template) {\n  const key = target.tagName + template;\n  let proto = protoCache.get(key);\n\n  if (!proto) {\n    proto = parseEl(target, template);\n    protoCache.set(key, proto);\n  }\n\n  return proto;\n}\n","import { listen, emit } from \"./events\";\nimport { getWindow } from \"./util\";\n\nexport function sessionValue(els, key, def) {\n  return storageValue(els, \"sessionStorage\", key, def);\n}\n\nexport function localValue(els, key, def) {\n  return storageValue(els, \"localStorage\", key, def);\n}\n\nexport function storageValue(els, storageName, key, def) {\n  if (typeof key === \"object\") {\n    return Object.keys(key).forEach(k => {\n      storageValue(els, storageName, k, key[k]);\n    });\n  }\n\n  const storage = getWindow(els)[storageName];\n\n  listen(els, key, e => {\n    if (e.__storageValue) return;\n    e.__storageValue = true;\n\n    const raw = JSON.stringify(e.detail);\n\n    if (raw !== storage[key]) {\n      storage[key] = raw;\n    }\n  });\n\n  listen(els, \"readStorage\", () => {\n    const raw = storage[key];\n\n    if (typeof raw === \"string\") {\n      try {\n        return emit(els, key, JSON.parse(raw));\n      } catch (err) {\n        // eslint-disable-next-line no-console\n        console.warn(err);\n      }\n    }\n\n    emit(els, key, def);\n  });\n}\n"],"names":["getRefs","els","prefix","inputRefs","refs","forEach","el","className","split","map","refName","indexOf","camelCase","slice","length","push","children","getClosestOfClass","firstOf","current","hasClass","parentNode","contain","target","els_","listOf","i","l","escapeHtml","text","tempEl","getTempEl","innerText","innerHTML","parseEl","html","firstElementChild","getWindow","document","getDocument","defaultView","parentWindow","ownerDocument","documentElement","tmp","filter","classNames","BREAK","fn","result","addEventListener","tempElMap","Map","get","tagName","createElement","set","str","replace","m","toUpperCase","observe","options","extra","o","parseOptions","hasVolatile","typeNames","types","parseArgumentNames","handler","name","full","volatile","cache","deferTimeout","type","index","listen","e","targetClass","detail","defer","clearTimeout","setTimeout","callHandler","args","apply","relay","targets","send","listener","ex","emit","CustomEvent","dispatch","arguments","bubbles","dispatchEvent","Array","isArray","toString","match","arg","csv","v","trim","getValue","checked","value","setValue","val","toValue","elValue","multiple","getAttribute","option","optionValue","textContent","selected","undefined","request","fetch","options_","url","req","read","headers","buildHeaders","body","buildBody","res","then","r","readResponse","b","status","Error","catch","err","context","Headers","FormData","Object","keys","key","JSON","stringify","contentType","c","toLowerCase","blob","formData","json","arrayBuffer","startChildren","offset","__appendOffset","keepChildren","n","appendChildren","optionsArray","baseOptions","appendChild","template","compat","compatible","proto","getProto","offsetChild","child","cloneProto","insertBefore","init","__init","pass","endChildren","Event","lastElementChild","removeChild","setText","__text","__html","setHtml","setAttr","__attr","hasOwnProperty","removeAttribute","setAttribute","setClass","condition","list","changed","splice","join","__proto","cloneNode","protoCache","sessionValue","def","storageValue","localValue","storageName","k","storage","__storageValue","raw","parse","console","warn"],"mappings":"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"}