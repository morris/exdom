{"version":3,"file":"exdom.js","sources":["../src/util.js","../src/events.js","../src/forms.js","../src/render.js","../src/http.js"],"sourcesContent":["export function getRefs(els, classNames, prefix) {\n  const refs = {};\n\n  forEach(els, el => {\n    classNames.forEach(className => {\n      refs[className] = [];\n      forEach(el.getElementsByClassName((prefix || \"-\") + className), el_ => {\n        refs[className].push(el_);\n      });\n    });\n  });\n\n  return refs;\n}\n\nexport function escapeHtml(context, text) {\n  const tempEl = getTempEl(context);\n  tempEl.innerText = text;\n  return tempEl.innerHTML;\n}\n\nexport function parseEl(context, html) {\n  if (typeof html === \"string\") {\n    const tempEl = getTempEl(context);\n    tempEl.innerHTML = html;\n    return tempEl.firstElementChild;\n  }\n\n  return html;\n}\n\nexport function getWindow(els) {\n  const document = els.ownerDocument || els[0].ownerDocument;\n  return document.defaultView || document.parentWindow;\n}\n\nexport function hasClass(els, className) {\n  const tmp = map(els, el => (el.className ? el.className.split(/\\s+/g) : []));\n  return (\n    tmp.filter(classNames => classNames.indexOf(className) >= 0).length ===\n    tmp.length\n  );\n}\n\nexport const BREAK = {};\n\nexport function forEach(list, fn) {\n  if (list && list.addEventListener) list = [list];\n  if (!list) list = [];\n  for (let i = 0, l = list.length; i < l; ++i) {\n    if (fn(list[i], i) === BREAK) return list;\n  }\n  return list;\n}\n\nexport function map(list, fn) {\n  if (list && list.addEventListener) list = [list];\n  if (!list) list = [];\n  const result = [];\n  for (let i = 0, l = list.length; i < l; ++i) {\n    result.push(fn(list[i], i));\n  }\n  return result;\n}\n\nexport function filter(list, fn) {\n  if (list && list.addEventListener) list = [list];\n  if (!list) list = [];\n  const result = [];\n  for (let i = 0, l = list.length; i < l; ++i) {\n    if (fn(list[i], i)) result.push(list[i]);\n  }\n  return result;\n}\n\n//\n\nlet _tempEl;\n\nfunction getTempEl(context) {\n  const document = context.ownerDocument || context[0].ownerDocument;\n  if (!_tempEl) _tempEl = document.createElement(\"div\");\n  return _tempEl;\n}\n","import { forEach, getWindow } from \"./util\";\n\nexport function observe(els, options, extra) {\n  const o = {\n    ...(typeof options === \"function\" ? { action: options } : options),\n    ...(typeof extra === \"function\" ? { action: extra } : extra)\n  };\n\n  let hasVolatile = false;\n\n  const types = (o.types || parseArgumentNames(o.action)).map(name => {\n    const full = name[0] === \"_\";\n    const volatile = full || name[0] === \"$\";\n\n    if (volatile) hasVolatile = true;\n\n    return {\n      name: volatile ? name.slice(1) : name,\n      volatile,\n      full\n    };\n  });\n\n  forEach(els, el => {\n    const cache = [];\n    cache.length = types.length;\n\n    let deferTimeout;\n\n    types.forEach((type, index) => {\n      listen(el, type.name, e => {\n        if (!type.volatile) cache[index] = e.detail;\n\n        if (!hasVolatile || type.volatile) {\n          if (o.defer) {\n            clearTimeout(deferTimeout);\n            deferTimeout = setTimeout(applyAction, o.defer);\n          } else {\n            applyAction();\n          }\n        }\n\n        function applyAction() {\n          if (type.volatile) {\n            const args = cache.slice(0);\n            args[index] = type.full ? e : e.detail;\n            o.action.apply(null, args);\n          } else {\n            o.action.apply(null, cache);\n          }\n        }\n      });\n    });\n  });\n}\n\nexport function relay(els, type, targets) {\n  listen(els, type, e => {\n    send(targets, type, e.detail);\n  });\n}\n\nexport function listen(els, type, listener, options) {\n  forEach(els, el => {\n    el.addEventListener(\n      type,\n      e => {\n        try {\n          return listener(e);\n        } catch (ex) {\n          emit(el, \"error\", ex);\n        }\n      },\n      options || false\n    );\n  });\n}\n\nexport function send(els, type, detail) {\n  if (!els || (!els.ownerDocument && els.length === 0)) return;\n\n  const { CustomEvent } = getWindow(els);\n\n  dispatch(\n    els,\n    new CustomEvent(type, {\n      detail: arguments.length === 2 ? {} : detail,\n      bubbles: false\n    })\n  );\n}\n\nexport function emit(els, type, detail) {\n  if (!els || (!els.ownerDocument && els.length === 0)) return;\n\n  const { CustomEvent } = getWindow(els);\n\n  dispatch(\n    els,\n    new CustomEvent(type, {\n      detail: arguments.length === 2 ? {} : detail,\n      bubbles: true\n    })\n  );\n}\n\nexport function dispatch(els, e) {\n  forEach(els, el => {\n    el.dispatchEvent(e);\n  });\n}\n\n//\n\nfunction parseArgumentNames(fn) {\n  const m = fn\n    .toString()\n    .match(/^function[^(]*\\(([^)]*)\\)|^\\(([^)]*)\\)|^([a-zA-Z$_][^=]*)/);\n  const args = m[1] || m[2] || m[3];\n\n  return args\n    .split(\",\")\n    .map(arg => arg.trim())\n    .filter(arg => !!arg);\n}\n","import { forEach } from \"./util\";\n\nexport function getValue(els) {\n  const el = els && els.addEventListener ? els : els[0];\n\n  if (!el) return;\n\n  switch (el.tagName === \"INPUT\" ? el.type : el.tagName) {\n    case \"text\":\n    case \"password\":\n    case \"SELECT\":\n      return el.value || \"\";\n    case \"TEXTAREA\":\n      return el.value;\n    case \"checkbox\":\n      return !!el.checked;\n    default:\n      return;\n  }\n}\n\nexport function setValue(els, value) {\n  forEach(els, el => {\n    const tagName = el.tagName;\n    const val = toValue(value);\n    let elValue, multiple;\n\n    switch (tagName === \"INPUT\" ? el.type : tagName) {\n      case \"text\":\n      case \"password\":\n      case \"TEXTAREA\":\n        if (el.value !== val + \"\") el.value = val;\n        break;\n      case \"checkbox\":\n        elValue = el.getAttribute(\"value\") || \"on\";\n        el.checked = Array.isArray(val)\n          ? value.indexOf(elValue) >= 0\n          : val === elValue;\n        break;\n      case \"radio\":\n        // TODO\n        break;\n      case \"SELECT\":\n        multiple = el.multiple && Array.isArray(val);\n\n        forEach(el.options, option => {\n          const optionValue = option.value || option.textContent;\n          option.selected = multiple\n            ? value.indexOf(optionValue) >= 0\n            : value + \"\" == optionValue;\n        });\n\n        break;\n    }\n  });\n}\n\nexport function toValue(value) {\n  if (value === null || value === undefined || value === false) return \"\";\n  if (value === true) return \"on\";\n  if (Array.isArray(value)) return value.map(toValue);\n  return value + \"\";\n}\n","import { forEach, parseEl, getWindow } from \"./util\";\n\nexport function setChildren(els, optionsArray, extra) {\n  forEach(els, el => {\n    optionsArray.forEach((options, index) => {\n      setChild(el, options, {\n        ...extra,\n        index: ((extra && extra.index) || 0) + index\n      });\n    });\n  });\n}\n\nexport function setChild(els, options, extra) {\n  const o = {\n    ...(typeof options === \"string\" ? { html: options } : options),\n    ...extra\n  };\n\n  const index = o.index || 0;\n  const tail = o.tail || 0;\n  const compat = o.compatible || compatible;\n\n  forEach(els, el => {\n    const { Event, CustomEvent } = getWindow(el);\n    const proto = o.proto || (o.html && getProto(el, o.html));\n    const maxIndex = el.children.length - tail;\n\n    if (index > maxIndex) {\n      throw new Error(\n        `Cannot render child element at index ${index} of ${\n          el.children.length\n        } children and tail ${tail}`\n      );\n    }\n\n    // reconciliation\n    const childAtIndex = el.children[index];\n    let child;\n\n    if (!proto) {\n      // if no prototype element was given,\n      // there must be an existing child to init/update\n      if (!childAtIndex) {\n        throw new Error(\n          `Cannot render new child element at index ${index} without base html`\n        );\n      }\n\n      child = childAtIndex;\n    } else if (index === maxIndex) {\n      // otherwise if index is maxIndex, must insert\n      child = cloneProto(proto);\n      el.insertBefore(child, childAtIndex);\n    } else if (!compat(childAtIndex, proto)) {\n      // otherwise, index < maxIndex <= el.children.length is guaranteed,\n      // so childAtIndex is too;\n      // must replace unless existing child is compatible\n      // also send destroy event to existing child\n      child = cloneProto(proto);\n      childAtIndex.dispatchEvent(\n        new Event(\"destroy\", {\n          bubbles: false\n        })\n      );\n      el.replaceChild(child, childAtIndex);\n    } else {\n      // finally, if child is compatible with prototype, dont insert/replace,\n      // just init and update existing child\n      child = childAtIndex;\n    }\n\n    // init child once\n    if (o.init && !child.__init) {\n      child.__init = true;\n      o.init(child);\n    }\n\n    // pass data, if any\n    if (o.pass) {\n      child.dispatchEvent(\n        new CustomEvent(\"pass\", {\n          detail: o.pass,\n          bubbles: false\n        })\n      );\n    }\n  });\n}\n\nexport function setText(els, text) {\n  forEach(els, el => {\n    if (el.__text !== text) {\n      el.__text = text;\n      // safe guard if setText() and setHtml() are used on the same element\n      el.__html = {};\n      el.innerText = text;\n    }\n  });\n}\n\nexport function setHtml(els, html) {\n  forEach(els, el => {\n    if (el.__html !== html) {\n      el.__html = html;\n      // see above\n      el.__text = {};\n      el.innerHTML = html;\n    }\n  });\n}\n\nexport function setAttr(els, name, value) {\n  forEach(els, el => {\n    if (!el.__attr) el.__attr = {};\n    if (!el.__attr.hasOwnProperty(name) || el.__attr[name] !== value) {\n      el.__attr[name] = value;\n      if (typeof value === \"undefined\" || value === null) {\n        el.removeAttribute(name, value);\n      } else {\n        el.setAttribute(name, value);\n      }\n    }\n  });\n}\n\nexport function setClass(els, classNames, condition) {\n  const list = classNames.split(/\\s+/g);\n\n  forEach(els, el => {\n    let changed = false;\n    const result = el.className.split(/\\s+/g).filter(className => !!className);\n    list.forEach(className => {\n      const index = result.indexOf(className);\n      if (condition && index === -1) {\n        result.push(className);\n        changed = true;\n      } else if (!condition && index >= 0) {\n        result.splice(index, 1);\n        changed = true;\n      }\n    });\n    if (changed) el.className = result.join(\" \");\n  });\n}\n\n//\n\nfunction compatible(el, proto) {\n  return (\n    el.__proto === proto ||\n    (el.tagName === proto.tagName && el.className === proto.className)\n  );\n}\n\nfunction cloneProto(proto) {\n  const el = proto.cloneNode(true);\n  el.__proto = proto;\n\n  return el;\n}\n\nconst protoCache = new Map();\n\nfunction getProto(context, html) {\n  let proto = protoCache.get(html);\n  if (!proto) {\n    proto = parseEl(context, html);\n    protoCache.set(html, proto);\n  }\n\n  return proto;\n}\n","import { emit } from \"./events\";\nimport { getWindow } from \"./util\";\n\nexport function request(els, options, extraOptions) {\n  const { fetch } = getWindow(els);\n\n  const options_ = typeof options === \"string\" ? { url: options } : options;\n\n  const req = {\n    read: \"auto\",\n    ...options_,\n    ...extraOptions,\n    headers: buildHeaders(els, options_, extraOptions),\n    body: buildBody(els, options_, extraOptions)\n  };\n\n  emit(els, \"request\", req);\n\n  let res, body;\n\n  return fetch(req.url, req)\n    .then(r => {\n      res = r;\n\n      emit(els, \"res\", { req, res });\n\n      if (!req.read) return;\n\n      return readResponse(els, res, req.read).then(b => {\n        body = b;\n        emit(els, \"fullResponse\", { req, res, body });\n      });\n    })\n    .then(() => {\n      if (res.status >= 400) {\n        throw new Error(`Status code error ${res.status}`);\n      }\n\n      return { req, res, body };\n    })\n    .catch(err => {\n      err.req = req;\n      err.res = res;\n      err.body = body;\n\n      emit(els, \"requestError\", err);\n\n      throw err;\n    });\n}\n\nexport function buildHeaders(context, options, extraOptions) {\n  const { Headers, FormData } = getWindow(context);\n\n  const req = { ...options, ...extraOptions };\n\n  const headers = new Headers();\n\n  if (req.read === \"json\" || req.read === \"application/json\") {\n    headers.set(\"Accept\", \"application/json\");\n  }\n\n  if (typeof req.body === \"object\" && !(req.body instanceof FormData)) {\n    headers.set(\"Content-Type\", \"application/json\");\n  }\n\n  Object.keys((options && options.headers) || {}).forEach(key => {\n    headers.set(key, options.headers[key]);\n  });\n\n  Object.keys((extraOptions && extraOptions.headers) || {}).forEach(key => {\n    headers.set(key, extraOptions.headers[key]);\n  });\n\n  return headers;\n}\n\nexport function buildBody(context, options, extraOptions) {\n  const { FormData } = getWindow(context);\n\n  const body = (extraOptions && extraOptions.body) || (options && options.body);\n\n  if (typeof body === \"object\" && !(body instanceof FormData)) {\n    return JSON.stringify(options.body);\n  }\n\n  return body;\n}\n\nexport function readResponse(context, res, contentType) {\n  const c =\n    contentType === \"auto\"\n      ? (res.headers.get(\"content-type\") || \"\").toLowerCase()\n      : contentType;\n\n  switch (c.replace(/;.*$/, \"\")) {\n    case \"blob\":\n      return res.blob();\n    case \"formData\":\n    case \"application/x-www-form-urlencoded\":\n      return res.formData();\n    case \"json\":\n    case \"application/json\":\n      return res.json();\n    case \"text\":\n    case \"application/javascript\":\n    case \"text/css\":\n    case \"text/csv\":\n    case \"text/calendar\":\n    case \"text/html\":\n    case \"text/javascript\":\n    case \"text/plain\":\n      return res.text();\n    default:\n      return res.arrayBuffer();\n  }\n}\n"],"names":["getRefs","els","classNames","prefix","refs","forEach","el","className","getElementsByClassName","el_","push","escapeHtml","context","text","tempEl","getTempEl","innerText","innerHTML","parseEl","html","firstElementChild","getWindow","document","ownerDocument","defaultView","parentWindow","hasClass","tmp","map","split","filter","indexOf","length","BREAK","list","fn","addEventListener","i","l","result","_tempEl","createElement","observe","options","extra","o","action","hasVolatile","types","parseArgumentNames","name","full","volatile","slice","cache","deferTimeout","type","index","listen","e","detail","defer","clearTimeout","setTimeout","applyAction","args","apply","relay","targets","send","listener","ex","emit","CustomEvent","dispatch","arguments","bubbles","dispatchEvent","m","toString","match","arg","trim","getValue","tagName","value","checked","setValue","val","toValue","elValue","multiple","getAttribute","Array","isArray","option","optionValue","textContent","selected","undefined","setChildren","optionsArray","setChild","tail","compat","compatible","Event","proto","getProto","maxIndex","children","Error","childAtIndex","child","cloneProto","insertBefore","replaceChild","init","__init","pass","setText","__text","__html","setHtml","setAttr","__attr","hasOwnProperty","removeAttribute","setAttribute","setClass","condition","changed","splice","join","__proto","cloneNode","protoCache","Map","get","set","request","extraOptions","fetch","options_","url","req","read","headers","buildHeaders","body","buildBody","res","then","r","readResponse","b","status","catch","err","Headers","FormData","Object","keys","key","JSON","stringify","contentType","c","toLowerCase","replace","blob","formData","json","arrayBuffer"],"mappings":"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"}