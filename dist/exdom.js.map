{"version":3,"file":"exdom.js","sources":["../src/util.js","../src/selector.js","../src/events.js","../src/render.js","../src/forms.js","../src/http.js","../src/mount.js","../src/storage.js","../src/exdom.js"],"sourcesContent":["export function contains(el, target) {\n  let current = target;\n\n  while (current) {\n    if (current === el) return true;\n    current = current.parentNode;\n  }\n\n  return false;\n}\n\nexport function escapeHtml(target, text) {\n  const tempEl = getTempEl(target);\n  tempEl.innerText = text;\n\n  return tempEl.innerHTML;\n}\n\nexport function parseEl(target, html) {\n  if (typeof html === \"string\") {\n    const tempEl = getTempEl(target);\n    tempEl.innerHTML = html;\n\n    return tempEl.firstElementChild;\n  }\n\n  return html;\n}\n\nexport function getWindow(el) {\n  const document = getDocument(el);\n  return document.defaultView || document.parentWindow;\n}\n\nexport function getDocument(el) {\n  return el.ownerDocument || el.document || (el.documentElement && el);\n}\n\nexport const BREAK = {};\n\nexport function forEach(els, fn) {\n  for (let i = 0, l = els.length; i < l; ++i) {\n    if (fn(els[i], i) === BREAK) return els;\n  }\n\n  return els;\n}\n\nexport function map(els, fn) {\n  const result = [];\n\n  for (let i = 0, l = els.length; i < l; ++i) {\n    result.push(fn(els[i]));\n  }\n\n  return result;\n}\n\nexport function filter(els, fn) {\n  const result = [];\n\n  for (let i = 0, l = els.length; i < l; ++i) {\n    const el = els[i];\n    if (fn(el, i)) result.push(el);\n  }\n\n  return result;\n}\n\n//\n\nlet tempElMap = new Map();\n\nfunction getTempEl(target) {\n  let tempEl = tempElMap.get(target.tagName);\n\n  if (!tempEl) {\n    const document = target.ownerDocument || target[0].ownerDocument;\n    tempEl = document.createElement(target.tagName);\n    tempElMap.set(target.tagName, tempEl);\n  }\n\n  return tempEl;\n}\n","export function find(el, selector) {\n  if (el.document) {\n    return el.document.querySelectorAll(selector);\n  }\n\n  if (el.documentElement) {\n    return el.querySelectorAll(selector);\n  }\n\n  return el.querySelectorAll(`#${requireId(el)} ${selector}`);\n}\n\nexport function matches(el, selector, scope) {\n  if (!el.matches) return false;\n  if (!scope) {\n    return el.matches(selector);\n  }\n\n  return el.matches(`#${requireId(scope)} ${selector}`);\n}\n\nexport function getClosest(el, selector, scope) {\n  if (matches(el, selector, scope)) {\n    return el;\n  } else if (el === scope || !el.parentNode) {\n    return;\n  } else {\n    return getClosest(el.parentNode, selector, scope);\n  }\n}\n\nexport function hasClass(el, className) {\n  return el.className\n    ? el.className.split(/\\s+/g).indexOf(className) >= 0\n    : false;\n}\n\nexport function requireId(el) {\n  if (!el.id) {\n    const r = Math.random()\n      .toString()\n      .slice(2);\n    el.id = `scope${r}`;\n  }\n\n  return el.id;\n}\n","import { getWindow } from \"./util\";\nimport { matches } from \"./selector\";\n\nexport function observe(el, eventSelectors, handler) {\n  const es = Array.isArray(eventSelectors) ? eventSelectors : [eventSelectors];\n  const types = [];\n  const cache = {};\n  let triggerRequired = false;\n\n  es.forEach(o => {\n    parseEventSelector(o).forEach(it => {\n      if (it.trigger) triggerRequired = true;\n      types.push(it);\n    });\n  });\n\n  types.forEach(type => {\n    const { name, trigger, selector } = type;\n\n    listen(el, name, e => {\n      if (selector && !matches(e.target, selector, el)) return;\n      if (!trigger) {\n        cache[name] = e.detail;\n        if (triggerRequired) return;\n      }\n\n      const details = { ...cache };\n      if (trigger) details[name] = e.detail;\n\n      handler(details, e);\n    });\n  });\n}\n\nexport function listen(el, type, handler, options) {\n  const h = e => {\n    try {\n      return handler(e);\n    } catch (err) {\n      emit(el, \"error\", err);\n    }\n  };\n\n  el.addEventListener(type, h, options || false);\n\n  return h;\n}\n\nexport function emit(el, type, detail) {\n  dispatch(el, type, detail, true);\n}\n\nexport function send(el, type, detail) {\n  dispatch(el, type, detail, false);\n}\n\nexport function dispatch(el, type, detail, bubbles) {\n  if (typeof type === \"object\") {\n    Object.keys(type).forEach(t => {\n      dispatch(el, t, type[t], bubbles);\n    });\n\n    return;\n  }\n\n  const { CustomEvent } = getWindow(el);\n\n  try {\n    el.dispatchEvent(\n      new CustomEvent(type, {\n        detail,\n        bubbles\n      })\n    );\n  } catch (err) {\n    try {\n      el.dispatchEvent(\n        new CustomEvent(\"error\", {\n          err,\n          bubbles: true\n        })\n      );\n    } catch (err_) {\n      // last resort\n      console.error(err); // eslint-disable-line no-console\n      console.error(err_); // eslint-disable-line no-console\n    }\n  }\n}\n\n//\n\nfunction parseEventSelector(eventSelector) {\n  const s = eventSelector.split(/@/);\n\n  return s[0]\n    .split(/[\\s,]+/)\n    .filter(type => type.length > 0)\n    .map(type => {\n      const trigger = type[0] === \"$\";\n\n      return {\n        name: trigger ? type.slice(1) : type,\n        trigger,\n        selector: s[1]\n      };\n    });\n}\n","import { parseEl, getDocument } from \"./util\";\n\nexport function setChildren(el, template, number) {\n  // create/reconcile elements\n  let offset = 0;\n\n  if (Array.isArray(template)) {\n    template.forEach(t => {\n      const offsetChild = el.children[offset];\n\n      if (!offsetChild || offsetChild.__template !== t) {\n        el.insertBefore(cloneTemplate(getTemplate(el, t)), offsetChild);\n      }\n\n      ++offset;\n    });\n  } else {\n    const proto = getTemplate(el, template);\n\n    while (offset < number) {\n      const offsetChild = el.children[offset];\n\n      if (!offsetChild || offsetChild.__template !== template) {\n        el.insertBefore(cloneTemplate(proto), offsetChild);\n      }\n\n      ++offset;\n    }\n  }\n\n  // remove obsolete children\n  while (el.children.length > offset) {\n    el.removeChild(el.lastElementChild);\n  }\n}\n\nconst UNSET = {};\n\nexport function setText(el, text) {\n  if (el.__text !== text) {\n    el.__text = text;\n    // safe guard if setText() and setHtml() are used on the same element\n    el.__html = UNSET;\n    el.innerText = text;\n  }\n}\n\nexport function setHtml(el, html) {\n  if (el.__html !== html) {\n    el.__html = html;\n    // see above\n    el.__text = UNSET;\n    el.innerHTML = html;\n  }\n}\n\nexport function setAttr(el, name, value) {\n  if (!el.__attr) el.__attr = {};\n  if (\n    !Object.prototype.hasOwnProperty.call(el.__attr, name) ||\n    el.__attr[name] !== value\n  ) {\n    el.__attr[name] = value;\n    if (typeof value === \"undefined\" || value === null) {\n      el.removeAttribute(name, value);\n    } else {\n      el.setAttribute(name, value);\n    }\n  }\n}\n\nexport function setClass(el, classNames, condition) {\n  const list = classNames.split(/\\s+/g);\n\n  let changed = false;\n  const result = el.className.split(/\\s+/g).filter(className => !!className);\n\n  list.forEach(className => {\n    const index = result.indexOf(className);\n    if (condition && index === -1) {\n      result.push(className);\n      changed = true;\n    } else if (!condition && index >= 0) {\n      result.splice(index, 1);\n      changed = true;\n    }\n  });\n\n  if (changed) el.className = result.join(\" \");\n}\n\n//\n\nfunction cloneTemplate(proto) {\n  const el = proto.cloneNode(true);\n  el.__template = proto.__template;\n\n  return el;\n}\n\nconst templateCache = new Map();\n\nfunction getTemplate(target, template) {\n  const key = target.tagName + template;\n  let proto = templateCache.get(key);\n\n  if (!proto) {\n    proto = parseTemplate(target, template);\n    proto.__template = template;\n    templateCache.set(key, proto);\n  }\n\n  return proto;\n}\n\nfunction parseTemplate(target, template) {\n  if (template.match(/^\\s*</)) return parseEl(target, template);\n\n  const classNames = template.split(\".\");\n  const tagName = classNames.shift() || \"div\";\n\n  const el = getDocument(target).createElement(tagName);\n  el.className = classNames.join(\" \");\n\n  return el;\n}\n","import { forEach } from \"./util\";\n\nexport function getValue(el) {\n  switch (el.tagName === \"INPUT\" ? el.type : el.tagName) {\n    case \"checkbox\":\n    case \"radio\":\n      return !!el.checked;\n    default:\n      // text, hidden, password, textarea, etc.\n      return el.value || \"\";\n  }\n}\n\nexport function setValue(el, value) {\n  const tagName = el.tagName;\n  const val = toValue(value);\n  let elValue, multiple, checked;\n\n  switch (tagName === \"INPUT\" ? el.type : tagName) {\n    case \"checkbox\":\n    case \"radio\":\n      elValue = el.getAttribute(\"value\") || \"on\";\n      checked = Array.isArray(val)\n        ? value.indexOf(elValue) >= 0\n        : val === elValue;\n\n      if (el.checked !== checked) el.checked = checked;\n      break;\n\n    case \"SELECT\":\n      multiple = el.multiple && Array.isArray(val);\n\n      forEach(el.options, option => {\n        const optionValue = option.value || option.textContent;\n        const selected = multiple\n          ? value.indexOf(optionValue) >= 0\n          : value + \"\" == optionValue;\n        if (option.selected !== selected) option.selected = selected;\n      });\n\n      break;\n\n    case \"OPTION\":\n    case \"file\":\n    case \"image\":\n    case \"reset\":\n      break;\n\n    default:\n      // text, hidden, password, textarea, etc.\n      if (el.value !== val + \"\") el.value = val;\n      break;\n  }\n}\n\nexport function toValue(value) {\n  if (value === null || value === undefined || value === false) return \"\";\n  if (value === true) return \"on\";\n  if (Array.isArray(value)) return value.map(toValue);\n  return value + \"\";\n}\n","import { emit } from \"./events\";\nimport { getWindow } from \"./util\";\n\nexport function request(el, options, extra) {\n  const { fetch } = getWindow(el);\n\n  const options_ = typeof options === \"string\" ? { url: options } : options;\n\n  const req = {\n    read: \"auto\",\n    ...options_,\n    ...extra,\n    headers: buildHeaders(el, options_, extra),\n    body: buildBody(el, options_, extra)\n  };\n\n  emit(el, \"request\", req);\n\n  let res, body;\n\n  return fetch(req.url, req)\n    .then(r => {\n      res = r;\n\n      emit(el, \"response\", { req, res });\n\n      if (!req.read) return;\n\n      return readResponse(el, res, req.read).then(b => {\n        body = b;\n        emit(el, \"fullResponse\", { req, res, body });\n      });\n    })\n    .then(() => {\n      if (!res.ok) {\n        throw new Error(`Status code error ${res.status}`);\n      }\n\n      emit(el, \"requestDone\");\n\n      return { req, res, body };\n    })\n    .catch(err => {\n      err.req = req;\n      err.res = res;\n      err.body = body;\n\n      emit(el, \"requestError\", err);\n      emit(el, \"requestDone\");\n\n      throw err;\n    });\n}\n\nexport function buildHeaders(context, options, extra) {\n  const { Headers, FormData } = getWindow(context);\n\n  const req = { ...options, ...extra };\n\n  const headers = new Headers();\n\n  if (req.read === \"json\" || req.read === \"application/json\") {\n    headers.set(\"Accept\", \"application/json\");\n  }\n\n  if (typeof req.body === \"object\" && !(req.body instanceof FormData)) {\n    headers.set(\"Content-Type\", \"application/json\");\n  }\n\n  if (options && options.headers) {\n    Object.keys(options.headers).forEach(key => {\n      headers.set(key, options.headers[key]);\n    });\n  }\n\n  if (extra && extra.headers) {\n    Object.keys(extra.headers).forEach(key => {\n      headers.set(key, extra.headers[key]);\n    });\n  }\n\n  return headers;\n}\n\nexport function buildBody(context, options, extra) {\n  const { FormData } = getWindow(context);\n\n  const body = (extra && extra.body) || (options && options.body);\n\n  if (typeof body === \"object\" && !(body instanceof FormData)) {\n    return JSON.stringify(options.body);\n  }\n\n  return body;\n}\n\nexport function readResponse(context, res, contentType) {\n  const c =\n    contentType === \"auto\"\n      ? (res.headers.get(\"content-type\") || \"\").toLowerCase()\n      : contentType;\n\n  switch (c.replace(/;.*$/, \"\")) {\n    case \"blob\":\n      return res.blob();\n    case \"formData\":\n    case \"application/x-www-form-urlencoded\":\n      return res.formData();\n    case \"json\":\n    case \"application/json\":\n      return res.json();\n    case \"text\":\n    case \"application/javascript\":\n    case \"text/css\":\n    case \"text/csv\":\n    case \"text/calendar\":\n    case \"text/html\":\n    case \"text/javascript\":\n    case \"text/plain\":\n      return res.text();\n    default:\n      return res.arrayBuffer();\n  }\n}\n","import { getWindow, forEach } from \"./util\";\nimport { emit, send } from \"./events\";\nimport { find } from \"./selector\";\n\nexport function mount(el, selector, fn) {\n  const window = getWindow(el);\n  const scope =\n    el === window.document || el === window ? window.document.body : el;\n\n  if (scope.__mount) {\n    scope.__mount.push([selector, fn]);\n  } else {\n    scope.__mount = [[selector, fn]];\n  }\n\n  doMount(scope, selector, fn);\n\n  if (!window.__mountScopes) {\n    window.__mountScopes = new Set([scope]);\n    autoMount(window);\n  } else {\n    window.__mountScopes.add(scope);\n  }\n}\n\nexport function autoMount(window) {\n  window.__mountFrameId = window.requestAnimationFrame(() => {\n    autoMount(window);\n    doMountAll(window);\n  });\n}\n\nexport function doMountAll(window) {\n  const scopes = window.__mountScopes;\n\n  if (!scopes) return;\n\n  scopes.forEach(scope => {\n    if (!window.document.body.contains(scope)) {\n      return scopes.delete(scope);\n    }\n\n    if (\n      \"__mountLastHtml\" in scope &&\n      scope.innerHTML === scope.__mountLastHtml\n    ) {\n      return;\n    }\n\n    scope.__mountLastHtml = scope.innerHTML;\n\n    scope.__mount.forEach(m => {\n      doMount(scope, m[0], m[1]);\n    });\n  });\n}\n\nexport function doMount(el, selector, fn) {\n  forEach(find(el, selector), target => {\n    if (!target.__mounted) {\n      target.__mounted = new Set([fn]);\n    } else if (target.__mounted.has(fn)) {\n      return;\n    } else {\n      target.__mounted.add(fn);\n    }\n\n    try {\n      fn(target);\n\n      if (\"__pass\" in target) send(target, \"pass\", target.__pass);\n    } catch (err) {\n      emit(target, \"error\", err);\n    }\n  });\n}\n","import { listen, emit } from \"./events\";\nimport { getWindow } from \"./util\";\n\nexport function sessionValue(el, key, def) {\n  return storageValue(el, \"sessionStorage\", key, def);\n}\n\nexport function localValue(el, key, def) {\n  return storageValue(el, \"localStorage\", key, def);\n}\n\nexport function storageValue(el, storageName, key, def) {\n  if (typeof key === \"object\") {\n    return Object.keys(key).forEach(k => {\n      storageValue(el, storageName, k, key[k]);\n    });\n  }\n\n  const window = getWindow(el);\n  const storage = window[storageName];\n\n  listen(el, key, e => {\n    if (e.__storageValue) return;\n    e.__storageValue = true;\n\n    const raw = JSON.stringify(e.detail);\n\n    if (raw !== storage[key]) {\n      storage[key] = raw;\n    }\n  });\n\n  const raw = storage[key];\n\n  if (typeof raw === \"string\") {\n    try {\n      return emit(el, key, JSON.parse(raw));\n    } catch (err) {\n      console.warn(err); // eslint-disable-line no-console\n    }\n  }\n\n  emit(el, key, def);\n}\n","import { forEach, filter, BREAK } from \"./util\";\nimport { observe, send, emit } from \"./events\";\nimport { setAttr, setClass, setHtml, setText, setChildren } from \"./render\";\nimport { setValue, getValue } from \"./forms\";\nimport { request } from \"./http\";\nimport { find, matches, hasClass, getClosest } from \"./selector\";\nimport { mount } from \"./mount\";\nimport { localValue, sessionValue } from \"./storage\";\n\nexport function exdom(els) {\n  if (!els) return new Exdom([]);\n  if (els.addEventListener) return new Exdom([els]);\n  return new Exdom(els);\n}\n\nexport class Exdom {\n  constructor(els) {\n    this.els = els;\n  }\n\n  // mounting\n\n  for(selector, body) {\n    forEach(this.els, el =>\n      mount(el, selector, el => body(new this.constructor([el])))\n    );\n  }\n\n  // selector\n\n  find(selector) {\n    const results = [];\n\n    forEach(this.els, el => {\n      results.push.apply(results, find(el, selector));\n    });\n\n    return new this.constructor(results);\n  }\n\n  matches(selector) {\n    let result = false;\n\n    forEach(this.els, el => {\n      if (matches(el, selector)) {\n        result = true;\n      } else {\n        result = false;\n        return BREAK;\n      }\n    });\n\n    return result;\n  }\n\n  hasClass(className) {\n    let result = false;\n\n    forEach(this.els, el => {\n      if (hasClass(el, className)) {\n        result = true;\n      } else {\n        result = false;\n        return BREAK;\n      }\n    });\n\n    return result;\n  }\n\n  closest(selector) {\n    const results = [];\n\n    forEach(this.els, el => {\n      const closest = getClosest(el, selector);\n      if (closest) results.push(closest);\n    });\n\n    return new this.constructor(results);\n  }\n\n  // util\n\n  forEach(fn) {\n    forEach(this.els, el => fn(new this.constructor(el)));\n\n    return this;\n  }\n\n  filter(fn) {\n    if (typeof fn === \"string\") {\n      return new this.constructor(filter(this.els, el => matches(el, fn)));\n    }\n\n    return new this.constructor(\n      filter(this.els, el => fn(new this.constructor(el)))\n    );\n  }\n\n  // render\n\n  children(data, templateSelector) {\n    forEach(this.els, el => {\n      let pass = data;\n\n      if (templateSelector) {\n        setChildren(el, templateSelector, data.length);\n      } else {\n        setChildren(el, data.map(it => it.template));\n        pass = data.map(it => it.pass);\n      }\n\n      for (let i = 0, l = el.children.length; i < l; ++i) {\n        const child = el.children[i];\n        child.__pass = pass[i];\n        send(child, \"pass\", pass[i]);\n      }\n    });\n\n    return this;\n  }\n\n  attr(key, value) {\n    forEach(this.els, el => setAttr(el, key, value));\n\n    return this;\n  }\n\n  classes(classNames, condition) {\n    forEach(this.els, el => setClass(el, classNames, condition));\n\n    return this;\n  }\n\n  html(html) {\n    forEach(this.els, el => setHtml(el, html));\n\n    return this;\n  }\n\n  text(text) {\n    forEach(this.els, el => setText(el, text));\n\n    return this;\n  }\n\n  // forms\n\n  value(value) {\n    if (arguments.length === 0) {\n      if (this.els.length === 0) return undefined;\n\n      return getValue(this.els[0]);\n    }\n\n    forEach(this.els, el => setValue(el, value));\n\n    return this;\n  }\n\n  // events\n\n  on(eventSelectors, handler) {\n    forEach(this.els, el =>\n      observe(el, eventSelectors, (d, e) => {\n        handler(this, d, e);\n      })\n    );\n\n    return this;\n  }\n\n  emit(type, detail) {\n    forEach(this.els, el => emit(el, type, detail));\n\n    return this;\n  }\n\n  send(type, detail) {\n    forEach(this.els, el => send(el, type, detail));\n\n    return this;\n  }\n\n  // http\n\n  request(options, extra) {\n    if (this.els.length !== 1) {\n      console.warn(\n        `Called request() on an element scope with ${this.els.length} elements`\n      );\n      return this;\n    }\n\n    return request(this.els[0], options, extra);\n  }\n\n  // deferred\n\n  timeout(ms, fn) {\n    return setTimeout(() => fn(this), ms);\n  }\n\n  interval(ms, fn) {\n    return setInterval(() => fn(this), ms);\n  }\n\n  // storage\n\n  local(key, def) {\n    forEach(this.els, el => localValue(el, key, def));\n    return this;\n  }\n\n  session(key, def) {\n    forEach(this.els, el => sessionValue(el, key, def));\n    return this;\n  }\n}\n"],"names":["contains","el","target","current","parentNode","escapeHtml","text","tempEl","getTempEl","innerText","innerHTML","parseEl","html","firstElementChild","getWindow","document","getDocument","defaultView","parentWindow","ownerDocument","documentElement","BREAK","forEach","els","fn","i","l","length","map","result","push","filter","tempElMap","Map","get","tagName","createElement","set","find","selector","querySelectorAll","requireId","matches","scope","getClosest","hasClass","className","split","indexOf","id","r","Math","random","toString","slice","observe","eventSelectors","handler","es","Array","isArray","types","cache","triggerRequired","o","parseEventSelector","it","trigger","type","name","listen","e","detail","details","options","h","err","emit","addEventListener","dispatch","send","bubbles","Object","keys","t","CustomEvent","dispatchEvent","err_","console","error","eventSelector","s","setChildren","template","number","offset","offsetChild","children","__template","insertBefore","cloneTemplate","getTemplate","proto","removeChild","lastElementChild","UNSET","setText","__text","__html","setHtml","setAttr","value","__attr","prototype","hasOwnProperty","call","removeAttribute","setAttribute","setClass","classNames","condition","list","changed","index","splice","join","cloneNode","templateCache","key","parseTemplate","match","shift","getValue","checked","setValue","val","toValue","elValue","multiple","getAttribute","option","optionValue","textContent","selected","undefined","request","extra","fetch","options_","url","req","read","headers","buildHeaders","body","buildBody","res","then","readResponse","b","ok","Error","status","catch","context","Headers","FormData","JSON","stringify","contentType","c","toLowerCase","replace","blob","formData","json","arrayBuffer","mount","window","__mount","doMount","__mountScopes","Set","autoMount","add","__mountFrameId","requestAnimationFrame","doMountAll","scopes","delete","__mountLastHtml","m","__mounted","has","__pass","sessionValue","def","storageValue","localValue","storageName","k","storage","__storageValue","raw","parse","warn","exdom","Exdom","constructor","results","apply","closest","data","templateSelector","pass","child","arguments","d","ms","setTimeout","setInterval"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,QAAT,CAAkBC,EAAlB,EAAsBC,MAAtB,EAA8B;EACnC,MAAIC,OAAO,GAAGD,MAAd;;EAEA,SAAOC,OAAP,EAAgB;EACd,QAAIA,OAAO,KAAKF,EAAhB,EAAoB,OAAO,IAAP;EACpBE,IAAAA,OAAO,GAAGA,OAAO,CAACC,UAAlB;EACD;;EAED,SAAO,KAAP;EACD;AAED,EAAO,SAASC,UAAT,CAAoBH,MAApB,EAA4BI,IAA5B,EAAkC;EACvC,MAAMC,MAAM,GAAGC,SAAS,CAACN,MAAD,CAAxB;EACAK,EAAAA,MAAM,CAACE,SAAP,GAAmBH,IAAnB;EAEA,SAAOC,MAAM,CAACG,SAAd;EACD;AAED,EAAO,SAASC,OAAT,CAAiBT,MAAjB,EAAyBU,IAAzB,EAA+B;EACpC,MAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;EAC5B,QAAML,MAAM,GAAGC,SAAS,CAACN,MAAD,CAAxB;EACAK,IAAAA,MAAM,CAACG,SAAP,GAAmBE,IAAnB;EAEA,WAAOL,MAAM,CAACM,iBAAd;EACD;;EAED,SAAOD,IAAP;EACD;AAED,EAAO,SAASE,SAAT,CAAmBb,EAAnB,EAAuB;EAC5B,MAAMc,QAAQ,GAAGC,WAAW,CAACf,EAAD,CAA5B;EACA,SAAOc,QAAQ,CAACE,WAAT,IAAwBF,QAAQ,CAACG,YAAxC;EACD;AAED,EAAO,SAASF,WAAT,CAAqBf,EAArB,EAAyB;EAC9B,SAAOA,EAAE,CAACkB,aAAH,IAAoBlB,EAAE,CAACc,QAAvB,IAAoCd,EAAE,CAACmB,eAAH,IAAsBnB,EAAjE;EACD;AAED,MAAaoB,KAAK,GAAG,EAAd;AAEP,EAAO,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,EAAtB,EAA0B;EAC/B,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGH,GAAG,CAACI,MAAxB,EAAgCF,CAAC,GAAGC,CAApC,EAAuC,EAAED,CAAzC,EAA4C;EAC1C,QAAID,EAAE,CAACD,GAAG,CAACE,CAAD,CAAJ,EAASA,CAAT,CAAF,KAAkBJ,KAAtB,EAA6B,OAAOE,GAAP;EAC9B;;EAED,SAAOA,GAAP;EACD;AAED,EAAO,SAASK,GAAT,CAAaL,GAAb,EAAkBC,EAAlB,EAAsB;EAC3B,MAAMK,MAAM,GAAG,EAAf;;EAEA,OAAK,IAAIJ,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGH,GAAG,CAACI,MAAxB,EAAgCF,CAAC,GAAGC,CAApC,EAAuC,EAAED,CAAzC,EAA4C;EAC1CI,IAAAA,MAAM,CAACC,IAAP,CAAYN,EAAE,CAACD,GAAG,CAACE,CAAD,CAAJ,CAAd;EACD;;EAED,SAAOI,MAAP;EACD;AAED,EAAO,SAASE,MAAT,CAAgBR,GAAhB,EAAqBC,EAArB,EAAyB;EAC9B,MAAMK,MAAM,GAAG,EAAf;;EAEA,OAAK,IAAIJ,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGH,GAAG,CAACI,MAAxB,EAAgCF,CAAC,GAAGC,CAApC,EAAuC,EAAED,CAAzC,EAA4C;EAC1C,QAAMxB,EAAE,GAAGsB,GAAG,CAACE,CAAD,CAAd;EACA,QAAID,EAAE,CAACvB,EAAD,EAAKwB,CAAL,CAAN,EAAeI,MAAM,CAACC,IAAP,CAAY7B,EAAZ;EAChB;;EAED,SAAO4B,MAAP;EACD;;EAID,IAAIG,SAAS,GAAG,IAAIC,GAAJ,EAAhB;;EAEA,SAASzB,SAAT,CAAmBN,MAAnB,EAA2B;EACzB,MAAIK,MAAM,GAAGyB,SAAS,CAACE,GAAV,CAAchC,MAAM,CAACiC,OAArB,CAAb;;EAEA,MAAI,CAAC5B,MAAL,EAAa;EACX,QAAMQ,QAAQ,GAAGb,MAAM,CAACiB,aAAP,IAAwBjB,MAAM,CAAC,CAAD,CAAN,CAAUiB,aAAnD;EACAZ,IAAAA,MAAM,GAAGQ,QAAQ,CAACqB,aAAT,CAAuBlC,MAAM,CAACiC,OAA9B,CAAT;EACAH,IAAAA,SAAS,CAACK,GAAV,CAAcnC,MAAM,CAACiC,OAArB,EAA8B5B,MAA9B;EACD;;EAED,SAAOA,MAAP;EACD;;ECnFM,SAAS+B,IAAT,CAAcrC,EAAd,EAAkBsC,QAAlB,EAA4B;EACjC,MAAItC,EAAE,CAACc,QAAP,EAAiB;EACf,WAAOd,EAAE,CAACc,QAAH,CAAYyB,gBAAZ,CAA6BD,QAA7B,CAAP;EACD;;EAED,MAAItC,EAAE,CAACmB,eAAP,EAAwB;EACtB,WAAOnB,EAAE,CAACuC,gBAAH,CAAoBD,QAApB,CAAP;EACD;;EAED,SAAOtC,EAAE,CAACuC,gBAAH,YAAwBC,SAAS,CAACxC,EAAD,CAAjC,cAAyCsC,QAAzC,EAAP;EACD;AAED,EAAO,SAASG,OAAT,CAAiBzC,EAAjB,EAAqBsC,QAArB,EAA+BI,KAA/B,EAAsC;EAC3C,MAAI,CAAC1C,EAAE,CAACyC,OAAR,EAAiB,OAAO,KAAP;;EACjB,MAAI,CAACC,KAAL,EAAY;EACV,WAAO1C,EAAE,CAACyC,OAAH,CAAWH,QAAX,CAAP;EACD;;EAED,SAAOtC,EAAE,CAACyC,OAAH,YAAeD,SAAS,CAACE,KAAD,CAAxB,cAAmCJ,QAAnC,EAAP;EACD;AAED,EAAO,SAASK,UAAT,CAAoB3C,EAApB,EAAwBsC,QAAxB,EAAkCI,KAAlC,EAAyC;EAC9C,MAAID,OAAO,CAACzC,EAAD,EAAKsC,QAAL,EAAeI,KAAf,CAAX,EAAkC;EAChC,WAAO1C,EAAP;EACD,GAFD,MAEO,IAAIA,EAAE,KAAK0C,KAAP,IAAgB,CAAC1C,EAAE,CAACG,UAAxB,EAAoC;EACzC;EACD,GAFM,MAEA;EACL,WAAOwC,UAAU,CAAC3C,EAAE,CAACG,UAAJ,EAAgBmC,QAAhB,EAA0BI,KAA1B,CAAjB;EACD;EACF;AAED,EAAO,SAASE,QAAT,CAAkB5C,EAAlB,EAAsB6C,SAAtB,EAAiC;EACtC,SAAO7C,EAAE,CAAC6C,SAAH,GACH7C,EAAE,CAAC6C,SAAH,CAAaC,KAAb,CAAmB,MAAnB,EAA2BC,OAA3B,CAAmCF,SAAnC,KAAiD,CAD9C,GAEH,KAFJ;EAGD;AAED,EAAO,SAASL,SAAT,CAAmBxC,EAAnB,EAAuB;EAC5B,MAAI,CAACA,EAAE,CAACgD,EAAR,EAAY;EACV,QAAMC,CAAC,GAAGC,IAAI,CAACC,MAAL,GACPC,QADO,GAEPC,KAFO,CAED,CAFC,CAAV;EAGArD,IAAAA,EAAE,CAACgD,EAAH,kBAAgBC,CAAhB;EACD;;EAED,SAAOjD,EAAE,CAACgD,EAAV;EACD;;EC3CM,SAASM,OAAT,CAAiBtD,EAAjB,EAAqBuD,cAArB,EAAqCC,OAArC,EAA8C;EACnD,MAAMC,EAAE,GAAGC,KAAK,CAACC,OAAN,CAAcJ,cAAd,IAAgCA,cAAhC,GAAiD,CAACA,cAAD,CAA5D;EACA,MAAMK,KAAK,GAAG,EAAd;EACA,MAAMC,KAAK,GAAG,EAAd;EACA,MAAIC,eAAe,GAAG,KAAtB;EAEAL,EAAAA,EAAE,CAACpC,OAAH,CAAW,UAAA0C,CAAC,EAAI;EACdC,IAAAA,kBAAkB,CAACD,CAAD,CAAlB,CAAsB1C,OAAtB,CAA8B,UAAA4C,EAAE,EAAI;EAClC,UAAIA,EAAE,CAACC,OAAP,EAAgBJ,eAAe,GAAG,IAAlB;EAChBF,MAAAA,KAAK,CAAC/B,IAAN,CAAWoC,EAAX;EACD,KAHD;EAID,GALD;EAOAL,EAAAA,KAAK,CAACvC,OAAN,CAAc,UAAA8C,IAAI,EAAI;EAAA,QACZC,IADY,GACgBD,IADhB,CACZC,IADY;EAAA,QACNF,OADM,GACgBC,IADhB,CACND,OADM;EAAA,QACG5B,QADH,GACgB6B,IADhB,CACG7B,QADH;EAGpB+B,IAAAA,MAAM,CAACrE,EAAD,EAAKoE,IAAL,EAAW,UAAAE,CAAC,EAAI;EACpB,UAAIhC,QAAQ,IAAI,CAACG,OAAO,CAAC6B,CAAC,CAACrE,MAAH,EAAWqC,QAAX,EAAqBtC,EAArB,CAAxB,EAAkD;;EAClD,UAAI,CAACkE,OAAL,EAAc;EACZL,QAAAA,KAAK,CAACO,IAAD,CAAL,GAAcE,CAAC,CAACC,MAAhB;EACA,YAAIT,eAAJ,EAAqB;EACtB;;EAED,UAAMU,OAAO,sBAAQX,KAAR,CAAb;;EACA,UAAIK,OAAJ,EAAaM,OAAO,CAACJ,IAAD,CAAP,GAAgBE,CAAC,CAACC,MAAlB;EAEbf,MAAAA,OAAO,CAACgB,OAAD,EAAUF,CAAV,CAAP;EACD,KAXK,CAAN;EAYD,GAfD;EAgBD;AAED,EAAO,SAASD,MAAT,CAAgBrE,EAAhB,EAAoBmE,IAApB,EAA0BX,OAA1B,EAAmCiB,OAAnC,EAA4C;EACjD,MAAMC,CAAC,GAAG,SAAJA,CAAI,CAAAJ,CAAC,EAAI;EACb,QAAI;EACF,aAAOd,OAAO,CAACc,CAAD,CAAd;EACD,KAFD,CAEE,OAAOK,GAAP,EAAY;EACZC,MAAAA,IAAI,CAAC5E,EAAD,EAAK,OAAL,EAAc2E,GAAd,CAAJ;EACD;EACF,GAND;;EAQA3E,EAAAA,EAAE,CAAC6E,gBAAH,CAAoBV,IAApB,EAA0BO,CAA1B,EAA6BD,OAAO,IAAI,KAAxC;EAEA,SAAOC,CAAP;EACD;AAED,EAAO,SAASE,IAAT,CAAc5E,EAAd,EAAkBmE,IAAlB,EAAwBI,MAAxB,EAAgC;EACrCO,EAAAA,QAAQ,CAAC9E,EAAD,EAAKmE,IAAL,EAAWI,MAAX,EAAmB,IAAnB,CAAR;EACD;AAED,EAAO,SAASQ,IAAT,CAAc/E,EAAd,EAAkBmE,IAAlB,EAAwBI,MAAxB,EAAgC;EACrCO,EAAAA,QAAQ,CAAC9E,EAAD,EAAKmE,IAAL,EAAWI,MAAX,EAAmB,KAAnB,CAAR;EACD;AAED,EAAO,SAASO,QAAT,CAAkB9E,EAAlB,EAAsBmE,IAAtB,EAA4BI,MAA5B,EAAoCS,OAApC,EAA6C;EAClD,MAAI,QAAOb,IAAP,MAAgB,QAApB,EAA8B;EAC5Bc,IAAAA,MAAM,CAACC,IAAP,CAAYf,IAAZ,EAAkB9C,OAAlB,CAA0B,UAAA8D,CAAC,EAAI;EAC7BL,MAAAA,QAAQ,CAAC9E,EAAD,EAAKmF,CAAL,EAAQhB,IAAI,CAACgB,CAAD,CAAZ,EAAiBH,OAAjB,CAAR;EACD,KAFD;EAIA;EACD;;EAPiD,mBAS1BnE,SAAS,CAACb,EAAD,CATiB;EAAA,MAS1CoF,WAT0C,cAS1CA,WAT0C;;EAWlD,MAAI;EACFpF,IAAAA,EAAE,CAACqF,aAAH,CACE,IAAID,WAAJ,CAAgBjB,IAAhB,EAAsB;EACpBI,MAAAA,MAAM,EAANA,MADoB;EAEpBS,MAAAA,OAAO,EAAPA;EAFoB,KAAtB,CADF;EAMD,GAPD,CAOE,OAAOL,GAAP,EAAY;EACZ,QAAI;EACF3E,MAAAA,EAAE,CAACqF,aAAH,CACE,IAAID,WAAJ,CAAgB,OAAhB,EAAyB;EACvBT,QAAAA,GAAG,EAAHA,GADuB;EAEvBK,QAAAA,OAAO,EAAE;EAFc,OAAzB,CADF;EAMD,KAPD,CAOE,OAAOM,IAAP,EAAa;EACb;EACAC,MAAAA,OAAO,CAACC,KAAR,CAAcb,GAAd,EAFa;;EAGbY,MAAAA,OAAO,CAACC,KAAR,CAAcF,IAAd,EAHa;EAId;EACF;EACF;;EAID,SAAStB,kBAAT,CAA4ByB,aAA5B,EAA2C;EACzC,MAAMC,CAAC,GAAGD,aAAa,CAAC3C,KAAd,CAAoB,GAApB,CAAV;EAEA,SAAO4C,CAAC,CAAC,CAAD,CAAD,CACJ5C,KADI,CACE,QADF,EAEJhB,MAFI,CAEG,UAAAqC,IAAI;EAAA,WAAIA,IAAI,CAACzC,MAAL,GAAc,CAAlB;EAAA,GAFP,EAGJC,GAHI,CAGA,UAAAwC,IAAI,EAAI;EACX,QAAMD,OAAO,GAAGC,IAAI,CAAC,CAAD,CAAJ,KAAY,GAA5B;EAEA,WAAO;EACLC,MAAAA,IAAI,EAAEF,OAAO,GAAGC,IAAI,CAACd,KAAL,CAAW,CAAX,CAAH,GAAmBc,IAD3B;EAELD,MAAAA,OAAO,EAAPA,OAFK;EAGL5B,MAAAA,QAAQ,EAAEoD,CAAC,CAAC,CAAD;EAHN,KAAP;EAKD,GAXI,CAAP;EAYD;;ECzGM,SAASC,WAAT,CAAqB3F,EAArB,EAAyB4F,QAAzB,EAAmCC,MAAnC,EAA2C;EAChD;EACA,MAAIC,MAAM,GAAG,CAAb;;EAEA,MAAIpC,KAAK,CAACC,OAAN,CAAciC,QAAd,CAAJ,EAA6B;EAC3BA,IAAAA,QAAQ,CAACvE,OAAT,CAAiB,UAAA8D,CAAC,EAAI;EACpB,UAAMY,WAAW,GAAG/F,EAAE,CAACgG,QAAH,CAAYF,MAAZ,CAApB;;EAEA,UAAI,CAACC,WAAD,IAAgBA,WAAW,CAACE,UAAZ,KAA2Bd,CAA/C,EAAkD;EAChDnF,QAAAA,EAAE,CAACkG,YAAH,CAAgBC,aAAa,CAACC,WAAW,CAACpG,EAAD,EAAKmF,CAAL,CAAZ,CAA7B,EAAmDY,WAAnD;EACD;;EAED,QAAED,MAAF;EACD,KARD;EASD,GAVD,MAUO;EACL,QAAMO,KAAK,GAAGD,WAAW,CAACpG,EAAD,EAAK4F,QAAL,CAAzB;;EAEA,WAAOE,MAAM,GAAGD,MAAhB,EAAwB;EACtB,UAAME,WAAW,GAAG/F,EAAE,CAACgG,QAAH,CAAYF,MAAZ,CAApB;;EAEA,UAAI,CAACC,WAAD,IAAgBA,WAAW,CAACE,UAAZ,KAA2BL,QAA/C,EAAyD;EACvD5F,QAAAA,EAAE,CAACkG,YAAH,CAAgBC,aAAa,CAACE,KAAD,CAA7B,EAAsCN,WAAtC;EACD;;EAED,QAAED,MAAF;EACD;EACF,GA1B+C;;;EA6BhD,SAAO9F,EAAE,CAACgG,QAAH,CAAYtE,MAAZ,GAAqBoE,MAA5B,EAAoC;EAClC9F,IAAAA,EAAE,CAACsG,WAAH,CAAetG,EAAE,CAACuG,gBAAlB;EACD;EACF;EAED,IAAMC,KAAK,GAAG,EAAd;AAEA,EAAO,SAASC,OAAT,CAAiBzG,EAAjB,EAAqBK,IAArB,EAA2B;EAChC,MAAIL,EAAE,CAAC0G,MAAH,KAAcrG,IAAlB,EAAwB;EACtBL,IAAAA,EAAE,CAAC0G,MAAH,GAAYrG,IAAZ,CADsB;;EAGtBL,IAAAA,EAAE,CAAC2G,MAAH,GAAYH,KAAZ;EACAxG,IAAAA,EAAE,CAACQ,SAAH,GAAeH,IAAf;EACD;EACF;AAED,EAAO,SAASuG,OAAT,CAAiB5G,EAAjB,EAAqBW,IAArB,EAA2B;EAChC,MAAIX,EAAE,CAAC2G,MAAH,KAAchG,IAAlB,EAAwB;EACtBX,IAAAA,EAAE,CAAC2G,MAAH,GAAYhG,IAAZ,CADsB;;EAGtBX,IAAAA,EAAE,CAAC0G,MAAH,GAAYF,KAAZ;EACAxG,IAAAA,EAAE,CAACS,SAAH,GAAeE,IAAf;EACD;EACF;AAED,EAAO,SAASkG,OAAT,CAAiB7G,EAAjB,EAAqBoE,IAArB,EAA2B0C,KAA3B,EAAkC;EACvC,MAAI,CAAC9G,EAAE,CAAC+G,MAAR,EAAgB/G,EAAE,CAAC+G,MAAH,GAAY,EAAZ;;EAChB,MACE,CAAC9B,MAAM,CAAC+B,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqClH,EAAE,CAAC+G,MAAxC,EAAgD3C,IAAhD,CAAD,IACApE,EAAE,CAAC+G,MAAH,CAAU3C,IAAV,MAAoB0C,KAFtB,EAGE;EACA9G,IAAAA,EAAE,CAAC+G,MAAH,CAAU3C,IAAV,IAAkB0C,KAAlB;;EACA,QAAI,OAAOA,KAAP,KAAiB,WAAjB,IAAgCA,KAAK,KAAK,IAA9C,EAAoD;EAClD9G,MAAAA,EAAE,CAACmH,eAAH,CAAmB/C,IAAnB,EAAyB0C,KAAzB;EACD,KAFD,MAEO;EACL9G,MAAAA,EAAE,CAACoH,YAAH,CAAgBhD,IAAhB,EAAsB0C,KAAtB;EACD;EACF;EACF;AAED,EAAO,SAASO,QAAT,CAAkBrH,EAAlB,EAAsBsH,UAAtB,EAAkCC,SAAlC,EAA6C;EAClD,MAAMC,IAAI,GAAGF,UAAU,CAACxE,KAAX,CAAiB,MAAjB,CAAb;EAEA,MAAI2E,OAAO,GAAG,KAAd;EACA,MAAM7F,MAAM,GAAG5B,EAAE,CAAC6C,SAAH,CAAaC,KAAb,CAAmB,MAAnB,EAA2BhB,MAA3B,CAAkC,UAAAe,SAAS;EAAA,WAAI,CAAC,CAACA,SAAN;EAAA,GAA3C,CAAf;EAEA2E,EAAAA,IAAI,CAACnG,OAAL,CAAa,UAAAwB,SAAS,EAAI;EACxB,QAAM6E,KAAK,GAAG9F,MAAM,CAACmB,OAAP,CAAeF,SAAf,CAAd;;EACA,QAAI0E,SAAS,IAAIG,KAAK,KAAK,CAAC,CAA5B,EAA+B;EAC7B9F,MAAAA,MAAM,CAACC,IAAP,CAAYgB,SAAZ;EACA4E,MAAAA,OAAO,GAAG,IAAV;EACD,KAHD,MAGO,IAAI,CAACF,SAAD,IAAcG,KAAK,IAAI,CAA3B,EAA8B;EACnC9F,MAAAA,MAAM,CAAC+F,MAAP,CAAcD,KAAd,EAAqB,CAArB;EACAD,MAAAA,OAAO,GAAG,IAAV;EACD;EACF,GATD;EAWA,MAAIA,OAAJ,EAAazH,EAAE,CAAC6C,SAAH,GAAejB,MAAM,CAACgG,IAAP,CAAY,GAAZ,CAAf;EACd;;EAID,SAASzB,aAAT,CAAuBE,KAAvB,EAA8B;EAC5B,MAAMrG,EAAE,GAAGqG,KAAK,CAACwB,SAAN,CAAgB,IAAhB,CAAX;EACA7H,EAAAA,EAAE,CAACiG,UAAH,GAAgBI,KAAK,CAACJ,UAAtB;EAEA,SAAOjG,EAAP;EACD;;EAED,IAAM8H,aAAa,GAAG,IAAI9F,GAAJ,EAAtB;;EAEA,SAASoE,WAAT,CAAqBnG,MAArB,EAA6B2F,QAA7B,EAAuC;EACrC,MAAMmC,GAAG,GAAG9H,MAAM,CAACiC,OAAP,GAAiB0D,QAA7B;EACA,MAAIS,KAAK,GAAGyB,aAAa,CAAC7F,GAAd,CAAkB8F,GAAlB,CAAZ;;EAEA,MAAI,CAAC1B,KAAL,EAAY;EACVA,IAAAA,KAAK,GAAG2B,aAAa,CAAC/H,MAAD,EAAS2F,QAAT,CAArB;EACAS,IAAAA,KAAK,CAACJ,UAAN,GAAmBL,QAAnB;EACAkC,IAAAA,aAAa,CAAC1F,GAAd,CAAkB2F,GAAlB,EAAuB1B,KAAvB;EACD;;EAED,SAAOA,KAAP;EACD;;EAED,SAAS2B,aAAT,CAAuB/H,MAAvB,EAA+B2F,QAA/B,EAAyC;EACvC,MAAIA,QAAQ,CAACqC,KAAT,CAAe,OAAf,CAAJ,EAA6B,OAAOvH,OAAO,CAACT,MAAD,EAAS2F,QAAT,CAAd;EAE7B,MAAM0B,UAAU,GAAG1B,QAAQ,CAAC9C,KAAT,CAAe,GAAf,CAAnB;EACA,MAAMZ,OAAO,GAAGoF,UAAU,CAACY,KAAX,MAAsB,KAAtC;EAEA,MAAMlI,EAAE,GAAGe,WAAW,CAACd,MAAD,CAAX,CAAoBkC,aAApB,CAAkCD,OAAlC,CAAX;EACAlC,EAAAA,EAAE,CAAC6C,SAAH,GAAeyE,UAAU,CAACM,IAAX,CAAgB,GAAhB,CAAf;EAEA,SAAO5H,EAAP;EACD;;EC3HM,SAASmI,QAAT,CAAkBnI,EAAlB,EAAsB;EAC3B,UAAQA,EAAE,CAACkC,OAAH,KAAe,OAAf,GAAyBlC,EAAE,CAACmE,IAA5B,GAAmCnE,EAAE,CAACkC,OAA9C;EACE,SAAK,UAAL;EACA,SAAK,OAAL;EACE,aAAO,CAAC,CAAClC,EAAE,CAACoI,OAAZ;;EACF;EACE;EACA,aAAOpI,EAAE,CAAC8G,KAAH,IAAY,EAAnB;EANJ;EAQD;AAED,EAAO,SAASuB,QAAT,CAAkBrI,EAAlB,EAAsB8G,KAAtB,EAA6B;EAClC,MAAM5E,OAAO,GAAGlC,EAAE,CAACkC,OAAnB;EACA,MAAMoG,GAAG,GAAGC,OAAO,CAACzB,KAAD,CAAnB;EACA,MAAI0B,OAAJ,EAAaC,QAAb,EAAuBL,OAAvB;;EAEA,UAAQlG,OAAO,KAAK,OAAZ,GAAsBlC,EAAE,CAACmE,IAAzB,GAAgCjC,OAAxC;EACE,SAAK,UAAL;EACA,SAAK,OAAL;EACEsG,MAAAA,OAAO,GAAGxI,EAAE,CAAC0I,YAAH,CAAgB,OAAhB,KAA4B,IAAtC;EACAN,MAAAA,OAAO,GAAG1E,KAAK,CAACC,OAAN,CAAc2E,GAAd,IACNxB,KAAK,CAAC/D,OAAN,CAAcyF,OAAd,KAA0B,CADpB,GAENF,GAAG,KAAKE,OAFZ;EAIA,UAAIxI,EAAE,CAACoI,OAAH,KAAeA,OAAnB,EAA4BpI,EAAE,CAACoI,OAAH,GAAaA,OAAb;EAC5B;;EAEF,SAAK,QAAL;EACEK,MAAAA,QAAQ,GAAGzI,EAAE,CAACyI,QAAH,IAAe/E,KAAK,CAACC,OAAN,CAAc2E,GAAd,CAA1B;EAEAjH,MAAAA,OAAO,CAACrB,EAAE,CAACyE,OAAJ,EAAa,UAAAkE,MAAM,EAAI;EAC5B,YAAMC,WAAW,GAAGD,MAAM,CAAC7B,KAAP,IAAgB6B,MAAM,CAACE,WAA3C;EACA,YAAMC,QAAQ,GAAGL,QAAQ,GACrB3B,KAAK,CAAC/D,OAAN,CAAc6F,WAAd,KAA8B,CADT,GAErB9B,KAAK,GAAG,EAAR,IAAc8B,WAFlB;EAGA,YAAID,MAAM,CAACG,QAAP,KAAoBA,QAAxB,EAAkCH,MAAM,CAACG,QAAP,GAAkBA,QAAlB;EACnC,OANM,CAAP;EAQA;;EAEF,SAAK,QAAL;EACA,SAAK,MAAL;EACA,SAAK,OAAL;EACA,SAAK,OAAL;EACE;;EAEF;EACE;EACA,UAAI9I,EAAE,CAAC8G,KAAH,KAAawB,GAAG,GAAG,EAAvB,EAA2BtI,EAAE,CAAC8G,KAAH,GAAWwB,GAAX;EAC3B;EAjCJ;EAmCD;AAED,EAAO,SAASC,OAAT,CAAiBzB,KAAjB,EAAwB;EAC7B,MAAIA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAKiC,SAA5B,IAAyCjC,KAAK,KAAK,KAAvD,EAA8D,OAAO,EAAP;EAC9D,MAAIA,KAAK,KAAK,IAAd,EAAoB,OAAO,IAAP;EACpB,MAAIpD,KAAK,CAACC,OAAN,CAAcmD,KAAd,CAAJ,EAA0B,OAAOA,KAAK,CAACnF,GAAN,CAAU4G,OAAV,CAAP;EAC1B,SAAOzB,KAAK,GAAG,EAAf;EACD;;ECzDM,SAASkC,OAAT,CAAiBhJ,EAAjB,EAAqByE,OAArB,EAA8BwE,KAA9B,EAAqC;EAAA,mBACxBpI,SAAS,CAACb,EAAD,CADe;EAAA,MAClCkJ,KADkC,cAClCA,KADkC;;EAG1C,MAAMC,QAAQ,GAAG,OAAO1E,OAAP,KAAmB,QAAnB,GAA8B;EAAE2E,IAAAA,GAAG,EAAE3E;EAAP,GAA9B,GAAiDA,OAAlE;;EAEA,MAAM4E,GAAG;EACPC,IAAAA,IAAI,EAAE;EADC,KAEJH,QAFI,MAGJF,KAHI;EAIPM,IAAAA,OAAO,EAAEC,YAAY,CAACxJ,EAAD,EAAKmJ,QAAL,EAAeF,KAAf,CAJd;EAKPQ,IAAAA,IAAI,EAAEC,SAAS,CAAC1J,EAAD,EAAKmJ,QAAL,EAAeF,KAAf;EALR,IAAT;;EAQArE,EAAAA,IAAI,CAAC5E,EAAD,EAAK,SAAL,EAAgBqJ,GAAhB,CAAJ;EAEA,MAAIM,GAAJ,EAASF,IAAT;EAEA,SAAOP,KAAK,CAACG,GAAG,CAACD,GAAL,EAAUC,GAAV,CAAL,CACJO,IADI,CACC,UAAA3G,CAAC,EAAI;EACT0G,IAAAA,GAAG,GAAG1G,CAAN;EAEA2B,IAAAA,IAAI,CAAC5E,EAAD,EAAK,UAAL,EAAiB;EAAEqJ,MAAAA,GAAG,EAAHA,GAAF;EAAOM,MAAAA,GAAG,EAAHA;EAAP,KAAjB,CAAJ;EAEA,QAAI,CAACN,GAAG,CAACC,IAAT,EAAe;EAEf,WAAOO,YAAY,CAAC7J,EAAD,EAAK2J,GAAL,EAAUN,GAAG,CAACC,IAAd,CAAZ,CAAgCM,IAAhC,CAAqC,UAAAE,CAAC,EAAI;EAC/CL,MAAAA,IAAI,GAAGK,CAAP;EACAlF,MAAAA,IAAI,CAAC5E,EAAD,EAAK,cAAL,EAAqB;EAAEqJ,QAAAA,GAAG,EAAHA,GAAF;EAAOM,QAAAA,GAAG,EAAHA,GAAP;EAAYF,QAAAA,IAAI,EAAJA;EAAZ,OAArB,CAAJ;EACD,KAHM,CAAP;EAID,GAZI,EAaJG,IAbI,CAaC,YAAM;EACV,QAAI,CAACD,GAAG,CAACI,EAAT,EAAa;EACX,YAAM,IAAIC,KAAJ,6BAA+BL,GAAG,CAACM,MAAnC,EAAN;EACD;;EAEDrF,IAAAA,IAAI,CAAC5E,EAAD,EAAK,aAAL,CAAJ;EAEA,WAAO;EAAEqJ,MAAAA,GAAG,EAAHA,GAAF;EAAOM,MAAAA,GAAG,EAAHA,GAAP;EAAYF,MAAAA,IAAI,EAAJA;EAAZ,KAAP;EACD,GArBI,EAsBJS,KAtBI,CAsBE,UAAAvF,GAAG,EAAI;EACZA,IAAAA,GAAG,CAAC0E,GAAJ,GAAUA,GAAV;EACA1E,IAAAA,GAAG,CAACgF,GAAJ,GAAUA,GAAV;EACAhF,IAAAA,GAAG,CAAC8E,IAAJ,GAAWA,IAAX;EAEA7E,IAAAA,IAAI,CAAC5E,EAAD,EAAK,cAAL,EAAqB2E,GAArB,CAAJ;EACAC,IAAAA,IAAI,CAAC5E,EAAD,EAAK,aAAL,CAAJ;EAEA,UAAM2E,GAAN;EACD,GA/BI,CAAP;EAgCD;AAED,EAAO,SAAS6E,YAAT,CAAsBW,OAAtB,EAA+B1F,OAA/B,EAAwCwE,KAAxC,EAA+C;EAAA,oBACtBpI,SAAS,CAACsJ,OAAD,CADa;EAAA,MAC5CC,OAD4C,eAC5CA,OAD4C;EAAA,MACnCC,QADmC,eACnCA,QADmC;;EAGpD,MAAMhB,GAAG,sBAAQ5E,OAAR,MAAoBwE,KAApB,CAAT;;EAEA,MAAMM,OAAO,GAAG,IAAIa,OAAJ,EAAhB;;EAEA,MAAIf,GAAG,CAACC,IAAJ,KAAa,MAAb,IAAuBD,GAAG,CAACC,IAAJ,KAAa,kBAAxC,EAA4D;EAC1DC,IAAAA,OAAO,CAACnH,GAAR,CAAY,QAAZ,EAAsB,kBAAtB;EACD;;EAED,MAAI,QAAOiH,GAAG,CAACI,IAAX,MAAoB,QAApB,IAAgC,EAAEJ,GAAG,CAACI,IAAJ,YAAoBY,QAAtB,CAApC,EAAqE;EACnEd,IAAAA,OAAO,CAACnH,GAAR,CAAY,cAAZ,EAA4B,kBAA5B;EACD;;EAED,MAAIqC,OAAO,IAAIA,OAAO,CAAC8E,OAAvB,EAAgC;EAC9BtE,IAAAA,MAAM,CAACC,IAAP,CAAYT,OAAO,CAAC8E,OAApB,EAA6BlI,OAA7B,CAAqC,UAAA0G,GAAG,EAAI;EAC1CwB,MAAAA,OAAO,CAACnH,GAAR,CAAY2F,GAAZ,EAAiBtD,OAAO,CAAC8E,OAAR,CAAgBxB,GAAhB,CAAjB;EACD,KAFD;EAGD;;EAED,MAAIkB,KAAK,IAAIA,KAAK,CAACM,OAAnB,EAA4B;EAC1BtE,IAAAA,MAAM,CAACC,IAAP,CAAY+D,KAAK,CAACM,OAAlB,EAA2BlI,OAA3B,CAAmC,UAAA0G,GAAG,EAAI;EACxCwB,MAAAA,OAAO,CAACnH,GAAR,CAAY2F,GAAZ,EAAiBkB,KAAK,CAACM,OAAN,CAAcxB,GAAd,CAAjB;EACD,KAFD;EAGD;;EAED,SAAOwB,OAAP;EACD;AAED,EAAO,SAASG,SAAT,CAAmBS,OAAnB,EAA4B1F,OAA5B,EAAqCwE,KAArC,EAA4C;EAAA,oBAC5BpI,SAAS,CAACsJ,OAAD,CADmB;EAAA,MACzCE,QADyC,eACzCA,QADyC;;EAGjD,MAAMZ,IAAI,GAAIR,KAAK,IAAIA,KAAK,CAACQ,IAAhB,IAA0BhF,OAAO,IAAIA,OAAO,CAACgF,IAA1D;;EAEA,MAAI,QAAOA,IAAP,MAAgB,QAAhB,IAA4B,EAAEA,IAAI,YAAYY,QAAlB,CAAhC,EAA6D;EAC3D,WAAOC,IAAI,CAACC,SAAL,CAAe9F,OAAO,CAACgF,IAAvB,CAAP;EACD;;EAED,SAAOA,IAAP;EACD;AAED,EAAO,SAASI,YAAT,CAAsBM,OAAtB,EAA+BR,GAA/B,EAAoCa,WAApC,EAAiD;EACtD,MAAMC,CAAC,GACLD,WAAW,KAAK,MAAhB,GACI,CAACb,GAAG,CAACJ,OAAJ,CAAYtH,GAAZ,CAAgB,cAAhB,KAAmC,EAApC,EAAwCyI,WAAxC,EADJ,GAEIF,WAHN;;EAKA,UAAQC,CAAC,CAACE,OAAF,CAAU,MAAV,EAAkB,EAAlB,CAAR;EACE,SAAK,MAAL;EACE,aAAOhB,GAAG,CAACiB,IAAJ,EAAP;;EACF,SAAK,UAAL;EACA,SAAK,mCAAL;EACE,aAAOjB,GAAG,CAACkB,QAAJ,EAAP;;EACF,SAAK,MAAL;EACA,SAAK,kBAAL;EACE,aAAOlB,GAAG,CAACmB,IAAJ,EAAP;;EACF,SAAK,MAAL;EACA,SAAK,wBAAL;EACA,SAAK,UAAL;EACA,SAAK,UAAL;EACA,SAAK,eAAL;EACA,SAAK,WAAL;EACA,SAAK,iBAAL;EACA,SAAK,YAAL;EACE,aAAOnB,GAAG,CAACtJ,IAAJ,EAAP;;EACF;EACE,aAAOsJ,GAAG,CAACoB,WAAJ,EAAP;EAnBJ;EAqBD;;ECvHM,SAASC,KAAT,CAAehL,EAAf,EAAmBsC,QAAnB,EAA6Bf,EAA7B,EAAiC;EACtC,MAAM0J,MAAM,GAAGpK,SAAS,CAACb,EAAD,CAAxB;EACA,MAAM0C,KAAK,GACT1C,EAAE,KAAKiL,MAAM,CAACnK,QAAd,IAA0Bd,EAAE,KAAKiL,MAAjC,GAA0CA,MAAM,CAACnK,QAAP,CAAgB2I,IAA1D,GAAiEzJ,EADnE;;EAGA,MAAI0C,KAAK,CAACwI,OAAV,EAAmB;EACjBxI,IAAAA,KAAK,CAACwI,OAAN,CAAcrJ,IAAd,CAAmB,CAACS,QAAD,EAAWf,EAAX,CAAnB;EACD,GAFD,MAEO;EACLmB,IAAAA,KAAK,CAACwI,OAAN,GAAgB,CAAC,CAAC5I,QAAD,EAAWf,EAAX,CAAD,CAAhB;EACD;;EAED4J,EAAAA,OAAO,CAACzI,KAAD,EAAQJ,QAAR,EAAkBf,EAAlB,CAAP;;EAEA,MAAI,CAAC0J,MAAM,CAACG,aAAZ,EAA2B;EACzBH,IAAAA,MAAM,CAACG,aAAP,GAAuB,IAAIC,GAAJ,CAAQ,CAAC3I,KAAD,CAAR,CAAvB;EACA4I,IAAAA,SAAS,CAACL,MAAD,CAAT;EACD,GAHD,MAGO;EACLA,IAAAA,MAAM,CAACG,aAAP,CAAqBG,GAArB,CAAyB7I,KAAzB;EACD;EACF;AAED,EAAO,SAAS4I,SAAT,CAAmBL,MAAnB,EAA2B;EAChCA,EAAAA,MAAM,CAACO,cAAP,GAAwBP,MAAM,CAACQ,qBAAP,CAA6B,YAAM;EACzDH,IAAAA,SAAS,CAACL,MAAD,CAAT;EACAS,IAAAA,UAAU,CAACT,MAAD,CAAV;EACD,GAHuB,CAAxB;EAID;AAED,EAAO,SAASS,UAAT,CAAoBT,MAApB,EAA4B;EACjC,MAAMU,MAAM,GAAGV,MAAM,CAACG,aAAtB;EAEA,MAAI,CAACO,MAAL,EAAa;EAEbA,EAAAA,MAAM,CAACtK,OAAP,CAAe,UAAAqB,KAAK,EAAI;EACtB,QAAI,CAACuI,MAAM,CAACnK,QAAP,CAAgB2I,IAAhB,CAAqB1J,QAArB,CAA8B2C,KAA9B,CAAL,EAA2C;EACzC,aAAOiJ,MAAM,CAACC,MAAP,CAAclJ,KAAd,CAAP;EACD;;EAED,QACE,qBAAqBA,KAArB,IACAA,KAAK,CAACjC,SAAN,KAAoBiC,KAAK,CAACmJ,eAF5B,EAGE;EACA;EACD;;EAEDnJ,IAAAA,KAAK,CAACmJ,eAAN,GAAwBnJ,KAAK,CAACjC,SAA9B;;EAEAiC,IAAAA,KAAK,CAACwI,OAAN,CAAc7J,OAAd,CAAsB,UAAAyK,CAAC,EAAI;EACzBX,MAAAA,OAAO,CAACzI,KAAD,EAAQoJ,CAAC,CAAC,CAAD,CAAT,EAAcA,CAAC,CAAC,CAAD,CAAf,CAAP;EACD,KAFD;EAGD,GAjBD;EAkBD;AAED,EAAO,SAASX,OAAT,CAAiBnL,EAAjB,EAAqBsC,QAArB,EAA+Bf,EAA/B,EAAmC;EACxCF,EAAAA,OAAO,CAACgB,IAAI,CAACrC,EAAD,EAAKsC,QAAL,CAAL,EAAqB,UAAArC,MAAM,EAAI;EACpC,QAAI,CAACA,MAAM,CAAC8L,SAAZ,EAAuB;EACrB9L,MAAAA,MAAM,CAAC8L,SAAP,GAAmB,IAAIV,GAAJ,CAAQ,CAAC9J,EAAD,CAAR,CAAnB;EACD,KAFD,MAEO,IAAItB,MAAM,CAAC8L,SAAP,CAAiBC,GAAjB,CAAqBzK,EAArB,CAAJ,EAA8B;EACnC;EACD,KAFM,MAEA;EACLtB,MAAAA,MAAM,CAAC8L,SAAP,CAAiBR,GAAjB,CAAqBhK,EAArB;EACD;;EAED,QAAI;EACFA,MAAAA,EAAE,CAACtB,MAAD,CAAF;EAEA,UAAI,YAAYA,MAAhB,EAAwB8E,IAAI,CAAC9E,MAAD,EAAS,MAAT,EAAiBA,MAAM,CAACgM,MAAxB,CAAJ;EACzB,KAJD,CAIE,OAAOtH,GAAP,EAAY;EACZC,MAAAA,IAAI,CAAC3E,MAAD,EAAS,OAAT,EAAkB0E,GAAlB,CAAJ;EACD;EACF,GAhBM,CAAP;EAiBD;;ECxEM,SAASuH,YAAT,CAAsBlM,EAAtB,EAA0B+H,GAA1B,EAA+BoE,GAA/B,EAAoC;EACzC,SAAOC,YAAY,CAACpM,EAAD,EAAK,gBAAL,EAAuB+H,GAAvB,EAA4BoE,GAA5B,CAAnB;EACD;AAED,EAAO,SAASE,UAAT,CAAoBrM,EAApB,EAAwB+H,GAAxB,EAA6BoE,GAA7B,EAAkC;EACvC,SAAOC,YAAY,CAACpM,EAAD,EAAK,cAAL,EAAqB+H,GAArB,EAA0BoE,GAA1B,CAAnB;EACD;AAED,EAAO,SAASC,YAAT,CAAsBpM,EAAtB,EAA0BsM,WAA1B,EAAuCvE,GAAvC,EAA4CoE,GAA5C,EAAiD;EACtD,MAAI,QAAOpE,GAAP,MAAe,QAAnB,EAA6B;EAC3B,WAAO9C,MAAM,CAACC,IAAP,CAAY6C,GAAZ,EAAiB1G,OAAjB,CAAyB,UAAAkL,CAAC,EAAI;EACnCH,MAAAA,YAAY,CAACpM,EAAD,EAAKsM,WAAL,EAAkBC,CAAlB,EAAqBxE,GAAG,CAACwE,CAAD,CAAxB,CAAZ;EACD,KAFM,CAAP;EAGD;;EAED,MAAMtB,MAAM,GAAGpK,SAAS,CAACb,EAAD,CAAxB;EACA,MAAMwM,OAAO,GAAGvB,MAAM,CAACqB,WAAD,CAAtB;EAEAjI,EAAAA,MAAM,CAACrE,EAAD,EAAK+H,GAAL,EAAU,UAAAzD,CAAC,EAAI;EACnB,QAAIA,CAAC,CAACmI,cAAN,EAAsB;EACtBnI,IAAAA,CAAC,CAACmI,cAAF,GAAmB,IAAnB;EAEA,QAAMC,GAAG,GAAGpC,IAAI,CAACC,SAAL,CAAejG,CAAC,CAACC,MAAjB,CAAZ;;EAEA,QAAImI,GAAG,KAAKF,OAAO,CAACzE,GAAD,CAAnB,EAA0B;EACxByE,MAAAA,OAAO,CAACzE,GAAD,CAAP,GAAe2E,GAAf;EACD;EACF,GATK,CAAN;EAWA,MAAMA,GAAG,GAAGF,OAAO,CAACzE,GAAD,CAAnB;;EAEA,MAAI,OAAO2E,GAAP,KAAe,QAAnB,EAA6B;EAC3B,QAAI;EACF,aAAO9H,IAAI,CAAC5E,EAAD,EAAK+H,GAAL,EAAUuC,IAAI,CAACqC,KAAL,CAAWD,GAAX,CAAV,CAAX;EACD,KAFD,CAEE,OAAO/H,GAAP,EAAY;EACZY,MAAAA,OAAO,CAACqH,IAAR,CAAajI,GAAb,EADY;EAEb;EACF;;EAEDC,EAAAA,IAAI,CAAC5E,EAAD,EAAK+H,GAAL,EAAUoE,GAAV,CAAJ;EACD;;EClCM,SAASU,KAAT,CAAevL,GAAf,EAAoB;EACzB,MAAI,CAACA,GAAL,EAAU,OAAO,IAAIwL,KAAJ,CAAU,EAAV,CAAP;EACV,MAAIxL,GAAG,CAACuD,gBAAR,EAA0B,OAAO,IAAIiI,KAAJ,CAAU,CAACxL,GAAD,CAAV,CAAP;EAC1B,SAAO,IAAIwL,KAAJ,CAAUxL,GAAV,CAAP;EACD;AAED,MAAawL,KAAb;EAAA;EAAA;EACE,iBAAYxL,GAAZ,EAAiB;EAAA;;EACf,SAAKA,GAAL,GAAWA,GAAX;EACD,GAHH;;;EAAA;EAAA;EAAA,yBAOMgB,QAPN,EAOgBmH,IAPhB,EAOsB;EAAA;;EAClBpI,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAClBgL,KAAK,CAAChL,EAAD,EAAKsC,QAAL,EAAe,UAAAtC,EAAE;EAAA,iBAAIyJ,IAAI,CAAC,IAAI,KAAI,CAACsD,WAAT,CAAqB,CAAC/M,EAAD,CAArB,CAAD,CAAR;EAAA,SAAjB,CADa;EAAA,OAAb,CAAP;EAGD,KAXH;;EAAA;EAAA;EAAA,2BAeOsC,QAfP,EAeiB;EACb,UAAM0K,OAAO,GAAG,EAAhB;;EAEA3L,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE,EAAI;EACtBgN,QAAAA,OAAO,CAACnL,IAAR,CAAaoL,KAAb,CAAmBD,OAAnB,EAA4B3K,IAAI,CAACrC,EAAD,EAAKsC,QAAL,CAAhC;EACD,OAFM,CAAP;;EAIA,aAAO,IAAI,KAAKyK,WAAT,CAAqBC,OAArB,CAAP;EACD;EAvBH;EAAA;EAAA,8BAyBU1K,QAzBV,EAyBoB;EAChB,UAAIV,MAAM,GAAG,KAAb;;EAEAP,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE,EAAI;EACtB,YAAIyC,OAAO,CAACzC,EAAD,EAAKsC,QAAL,CAAX,EAA2B;EACzBV,UAAAA,MAAM,GAAG,IAAT;EACD,SAFD,MAEO;EACLA,UAAAA,MAAM,GAAG,KAAT;EACA,iBAAOR,KAAP;EACD;EACF,OAPM,CAAP;;EASA,aAAOQ,MAAP;EACD;EAtCH;EAAA;EAAA,+BAwCWiB,SAxCX,EAwCsB;EAClB,UAAIjB,MAAM,GAAG,KAAb;;EAEAP,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE,EAAI;EACtB,YAAI4C,QAAQ,CAAC5C,EAAD,EAAK6C,SAAL,CAAZ,EAA6B;EAC3BjB,UAAAA,MAAM,GAAG,IAAT;EACD,SAFD,MAEO;EACLA,UAAAA,MAAM,GAAG,KAAT;EACA,iBAAOR,KAAP;EACD;EACF,OAPM,CAAP;;EASA,aAAOQ,MAAP;EACD;EArDH;EAAA;EAAA,4BAuDUU,QAvDV,EAuDoB;EAChB,UAAM0K,OAAO,GAAG,EAAhB;;EAEA3L,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE,EAAI;EACtB,YAAMkN,OAAO,GAAGvK,UAAU,CAAC3C,EAAD,EAAKsC,QAAL,CAA1B;EACA,YAAI4K,OAAJ,EAAaF,OAAO,CAACnL,IAAR,CAAaqL,OAAb;EACd,OAHM,CAAP;;EAKA,aAAO,IAAI,KAAKH,WAAT,CAAqBC,OAArB,CAAP;EACD,KAhEH;;EAAA;EAAA;EAAA,8BAoEUzL,EApEV,EAoEc;EAAA;;EACVF,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAIuB,EAAE,CAAC,IAAI,MAAI,CAACwL,WAAT,CAAqB/M,EAArB,CAAD,CAAN;EAAA,OAAb,CAAP;;EAEA,aAAO,IAAP;EACD;EAxEH;EAAA;EAAA,6BA0ESuB,EA1ET,EA0Ea;EAAA;;EACT,UAAI,OAAOA,EAAP,KAAc,QAAlB,EAA4B;EAC1B,eAAO,IAAI,KAAKwL,WAAT,CAAqBjL,MAAM,CAAC,KAAKR,GAAN,EAAW,UAAAtB,EAAE;EAAA,iBAAIyC,OAAO,CAACzC,EAAD,EAAKuB,EAAL,CAAX;EAAA,SAAb,CAA3B,CAAP;EACD;;EAED,aAAO,IAAI,KAAKwL,WAAT,CACLjL,MAAM,CAAC,KAAKR,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAIuB,EAAE,CAAC,IAAI,MAAI,CAACwL,WAAT,CAAqB/M,EAArB,CAAD,CAAN;EAAA,OAAb,CADD,CAAP;EAGD,KAlFH;;EAAA;EAAA;EAAA,6BAsFWmN,IAtFX,EAsFiBC,gBAtFjB,EAsFmC;EAC/B/L,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE,EAAI;EACtB,YAAIqN,IAAI,GAAGF,IAAX;;EAEA,YAAIC,gBAAJ,EAAsB;EACpBzH,UAAAA,WAAW,CAAC3F,EAAD,EAAKoN,gBAAL,EAAuBD,IAAI,CAACzL,MAA5B,CAAX;EACD,SAFD,MAEO;EACLiE,UAAAA,WAAW,CAAC3F,EAAD,EAAKmN,IAAI,CAACxL,GAAL,CAAS,UAAAsC,EAAE;EAAA,mBAAIA,EAAE,CAAC2B,QAAP;EAAA,WAAX,CAAL,CAAX;EACAyH,UAAAA,IAAI,GAAGF,IAAI,CAACxL,GAAL,CAAS,UAAAsC,EAAE;EAAA,mBAAIA,EAAE,CAACoJ,IAAP;EAAA,WAAX,CAAP;EACD;;EAED,aAAK,IAAI7L,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGzB,EAAE,CAACgG,QAAH,CAAYtE,MAAhC,EAAwCF,CAAC,GAAGC,CAA5C,EAA+C,EAAED,CAAjD,EAAoD;EAClD,cAAM8L,KAAK,GAAGtN,EAAE,CAACgG,QAAH,CAAYxE,CAAZ,CAAd;EACA8L,UAAAA,KAAK,CAACrB,MAAN,GAAeoB,IAAI,CAAC7L,CAAD,CAAnB;;EACAuD,UAAAA,IAAI,CAACuI,KAAD,EAAQ,MAAR,EAAgBD,IAAI,CAAC7L,CAAD,CAApB,CAAJ;EACD;EACF,OAfM,CAAP;;EAiBA,aAAO,IAAP;EACD;EAzGH;EAAA;EAAA,yBA2GOuG,GA3GP,EA2GYjB,KA3GZ,EA2GmB;EACfzF,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAI6G,OAAO,CAAC7G,EAAD,EAAK+H,GAAL,EAAUjB,KAAV,CAAX;EAAA,OAAb,CAAP;;EAEA,aAAO,IAAP;EACD;EA/GH;EAAA;EAAA,4BAiHUQ,UAjHV,EAiHsBC,SAjHtB,EAiHiC;EAC7BlG,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAIqH,QAAQ,CAACrH,EAAD,EAAKsH,UAAL,EAAiBC,SAAjB,CAAZ;EAAA,OAAb,CAAP;;EAEA,aAAO,IAAP;EACD;EArHH;EAAA;EAAA,yBAuHO5G,KAvHP,EAuHa;EACTU,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAI4G,OAAO,CAAC5G,EAAD,EAAKW,KAAL,CAAX;EAAA,OAAb,CAAP;;EAEA,aAAO,IAAP;EACD;EA3HH;EAAA;EAAA,yBA6HON,KA7HP,EA6Ha;EACTgB,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAIyG,OAAO,CAACzG,EAAD,EAAKK,KAAL,CAAX;EAAA,OAAb,CAAP;;EAEA,aAAO,IAAP;EACD,KAjIH;;EAAA;EAAA;EAAA,0BAqIQyG,MArIR,EAqIe;EACX,UAAIyG,SAAS,CAAC7L,MAAV,KAAqB,CAAzB,EAA4B;EAC1B,YAAI,KAAKJ,GAAL,CAASI,MAAT,KAAoB,CAAxB,EAA2B,OAAOqH,SAAP;EAE3B,eAAOZ,QAAQ,CAAC,KAAK7G,GAAL,CAAS,CAAT,CAAD,CAAf;EACD;;EAEDD,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAIqI,QAAQ,CAACrI,EAAD,EAAK8G,MAAL,CAAZ;EAAA,OAAb,CAAP;;EAEA,aAAO,IAAP;EACD,KA/IH;;EAAA;EAAA;EAAA,uBAmJKvD,cAnJL,EAmJqBC,OAnJrB,EAmJ8B;EAAA;;EAC1BnC,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAClBsD,OAAO,CAACtD,EAAD,EAAKuD,cAAL,EAAqB,UAACiK,CAAD,EAAIlJ,CAAJ,EAAU;EACpCd,UAAAA,OAAO,CAAC,MAAD,EAAOgK,CAAP,EAAUlJ,CAAV,CAAP;EACD,SAFM,CADW;EAAA,OAAb,CAAP;;EAMA,aAAO,IAAP;EACD;EA3JH;EAAA;EAAA,2BA6JOH,IA7JP,EA6JaI,MA7Jb,EA6JqB;EACjBlD,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAI4E,IAAI,CAAC5E,EAAD,EAAKmE,IAAL,EAAWI,MAAX,CAAR;EAAA,OAAb,CAAP;;EAEA,aAAO,IAAP;EACD;EAjKH;EAAA;EAAA,2BAmKOJ,IAnKP,EAmKaI,MAnKb,EAmKqB;EACjBlD,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAI+E,IAAI,CAAC/E,EAAD,EAAKmE,IAAL,EAAWI,MAAX,CAAR;EAAA,OAAb,CAAP;;EAEA,aAAO,IAAP;EACD,KAvKH;;EAAA;EAAA;EAAA,8BA2KUE,OA3KV,EA2KmBwE,KA3KnB,EA2K0B;EACtB,UAAI,KAAK3H,GAAL,CAASI,MAAT,KAAoB,CAAxB,EAA2B;EACzB6D,QAAAA,OAAO,CAACqH,IAAR,qDAC+C,KAAKtL,GAAL,CAASI,MADxD;EAGA,eAAO,IAAP;EACD;;EAED,aAAOsH,OAAO,CAAC,KAAK1H,GAAL,CAAS,CAAT,CAAD,EAAcmD,OAAd,EAAuBwE,KAAvB,CAAd;EACD,KApLH;;EAAA;EAAA;EAAA,4BAwLUwE,EAxLV,EAwLclM,EAxLd,EAwLkB;EAAA;;EACd,aAAOmM,UAAU,CAAC;EAAA,eAAMnM,EAAE,CAAC,MAAD,CAAR;EAAA,OAAD,EAAiBkM,EAAjB,CAAjB;EACD;EA1LH;EAAA;EAAA,6BA4LWA,EA5LX,EA4LelM,EA5Lf,EA4LmB;EAAA;;EACf,aAAOoM,WAAW,CAAC;EAAA,eAAMpM,EAAE,CAAC,MAAD,CAAR;EAAA,OAAD,EAAiBkM,EAAjB,CAAlB;EACD,KA9LH;;EAAA;EAAA;EAAA,0BAkMQ1F,GAlMR,EAkMaoE,GAlMb,EAkMkB;EACd9K,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAIqM,UAAU,CAACrM,EAAD,EAAK+H,GAAL,EAAUoE,GAAV,CAAd;EAAA,OAAb,CAAP;;EACA,aAAO,IAAP;EACD;EArMH;EAAA;EAAA,4BAuMUpE,GAvMV,EAuMeoE,GAvMf,EAuMoB;EAChB9K,MAAAA,OAAO,CAAC,KAAKC,GAAN,EAAW,UAAAtB,EAAE;EAAA,eAAIkM,YAAY,CAAClM,EAAD,EAAK+H,GAAL,EAAUoE,GAAV,CAAhB;EAAA,OAAb,CAAP;;EACA,aAAO,IAAP;EACD;EA1MH;;EAAA;EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}