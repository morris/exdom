{"version":3,"sources":["util.js","events.js","forms.js","render.js","index.js"],"names":["getRefs","els","classNames","prefix","escapeHtml","text","context","tempEl","getTempEl","innerText","innerHTML","parseEl","html","firstElementChild","getWindow","doc","ownerDocument","defaultView","parentWindow","hasClass","className","tmp","map","el","split","filter","indexOf","length","BREAK","forEach","list","fn","addEventListener","i","l","result","push","_tempEl","createElement","observe","options1","options2","o","action","hasVolatile","types","parseArgumentNames","name","full","volatile","slice","cache","deferTimeout","type","index","listen","e","applyAction","args","detail","apply","defer","clearTimeout","setTimeout","relay","targets","send","listener","options","ex","emit","CustomEvent","dispatch","arguments","bubbles","dispatchEvent","m","toString","match","arg","trim","getValue","tagName","value","checked","setValue","val","toValue","elValue","getAttribute","Array","isArray","multiple","option","optionValue","textContent","selected","setChildren","optionsArray","extraOptions","setChild","tail","compat","compatible","Event","proto","getProto","maxIndex","children","Error","childAtIndex","child","cloneProto","insertBefore","replaceChild","init","__init","data","setText","__text","__html","setHtml","setAttr","__attr","hasOwnProperty","removeAttribute","setAttribute","setClass","condition","changed","splice","join","__proto","cloneNode","protoCache","Map","get","set"],"mappings":"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","file":"index.map","sourceRoot":"../src","sourcesContent":["export function getRefs(els, classNames, prefix) {}\n\nexport function escapeHtml(text, context) {\n  const tempEl = getTempEl(context);\n  tempEl.innerText = text;\n  return tempEl.innerHTML;\n}\n\nexport function parseEl(html, context) {\n  if (typeof html === \"string\") {\n    const tempEl = getTempEl(context);\n    tempEl.innerHTML = html;\n    return tempEl.firstElementChild;\n  }\n\n  return html;\n}\n\nexport function getWindow(els) {\n  const doc = els.ownerDocument || els[0].ownerDocument;\n  return doc.defaultView || doc.parentWindow;\n}\n\nexport function hasClass(els, className) {\n  const tmp = map(els, el => (el.className ? el.className.split(/\\s+/g) : []));\n  return (\n    tmp.filter(classNames => classNames.indexOf(className) >= 0).length ===\n    tmp.length\n  );\n}\n\nexport const BREAK = {};\n\nexport function forEach(list, fn) {\n  if (list && list.addEventListener) list = [list];\n  if (!list) list = [];\n  for (let i = 0, l = list.length; i < l; ++i) {\n    if (fn(list[i], i) === BREAK) return list;\n  }\n  return list;\n}\n\nexport function map(list, fn) {\n  if (list && list.addEventListener) list = [list];\n  if (!list) list = [];\n  const result = [];\n  for (let i = 0, l = list.length; i < l; ++i) {\n    result.push(fn(list[i], i));\n  }\n  return result;\n}\n\nexport function filter(list, fn) {\n  if (list && list.addEventListener) list = [list];\n  if (!list) list = [];\n  const result = [];\n  for (let i = 0, l = list.length; i < l; ++i) {\n    if (fn(list[i], i)) result.push(list[i]);\n  }\n  return result;\n}\n\n//\n\nlet _tempEl;\n\nfunction getTempEl(context) {\n  const doc = context.ownerDocument || context[0].ownerDocument;\n  if (!_tempEl) _tempEl = doc.createElement(\"div\");\n  return _tempEl;\n}\n","import { forEach, getWindow } from \"./util\";\n\nexport function observe(els, options1, options2) {\n  const o = {\n    ...(typeof options1 === \"function\" ? { action: options1 } : options1),\n    ...(typeof options2 === \"function\" ? { action: options2 } : options2)\n  };\n\n  let hasVolatile = false;\n\n  const types = (o.types || parseArgumentNames(o.action)).map(\n    name => {\n      const full = name[0] === \"_\";\n      const volatile = full || name[0] === \"$\";\n\n      if (volatile) hasVolatile = true;\n\n      return {\n        name: volatile ? name.slice(1) : name,\n        volatile,\n        full\n      };\n    }\n  );\n\n  forEach(els, el => {\n    const cache = [];\n    cache.length = types.length;\n\n    let deferTimeout;\n\n    types.forEach((type, index) => {\n      listen(el, type.name, e => {\n        if (!type.volatile) cache[index] = type.full ? e : e.detail;\n\n        if (!hasVolatile || type.volatile) {\n          if (o.defer) {\n            clearTimeout(deferTimeout);\n            deferTimeout = setTimeout(applyAction, o.defer);\n          } else {\n            applyAction();\n          }\n        }\n\n        function applyAction() {\n          if (type.volatile) {\n            const args = cache.slice(0);\n            args[index] = type.full ? e : e.detail;\n            o.action.apply(null, args);\n          } else {\n            o.action.apply(null, cache);\n          }\n        }\n      });\n    });\n  });\n}\n\nexport function relay(els, type, targets) {\n  listen(els, type, e => {\n    send(targets, type, e.detail);\n  });\n}\n\nexport function listen(els, type, listener, options) {\n  forEach(els, el => {\n    el.addEventListener(\n      type,\n      e => {\n        try {\n          return listener(e);\n        } catch (ex) {\n          emit(el, \"error\", ex);\n        }\n      },\n      options || false\n    );\n  });\n}\n\nexport function send(els, type, detail) {\n  if (!els || els.length === 0) return;\n\n  const { CustomEvent } = getWindow(els);\n\n  dispatch(\n    els,\n    new CustomEvent(type, {\n      detail: arguments.length === 2 ? {} : detail,\n      bubbles: false\n    })\n  );\n}\n\nexport function emit(els, type, detail) {\n  if (!els || els.length === 0) return;\n\n  const { CustomEvent } = getWindow(els);\n\n  dispatch(\n    els,\n    new CustomEvent(type, {\n      detail: arguments.length === 2 ? {} : detail,\n      bubbles: true\n    })\n  );\n}\n\nexport function dispatch(els, e) {\n  forEach(els, el => {\n    el.dispatchEvent(e);\n  });\n}\n\n//\n\nfunction parseArgumentNames(fn) {\n  const m = fn.toString().match(/\\(([^)]*)\\)|([a-zA-Z$_][^=]*)/);\n  const args = m[1] || m[2];\n\n  return args\n    .split(\",\")\n    .map(arg => arg.trim())\n    .filter(arg => !!arg);\n}\n","import { forEach } from './util';\n\nexport function getValue(els) {\n  const el = els && els.addEventListener ? els : els[0];\n\n  if (!el) return;\n\n  switch (el.tagName === \"INPUT\" ? el.type : el.tagName) {\n    case \"text\":\n    case \"password\":\n    case \"SELECT\":\n      return el.value || \"\";\n    case \"TEXTAREA\":\n      return el.value;\n    case \"checkbox\":\n      return !!el.checked;\n    default:\n      return;\n  }\n}\n\nexport function setValue(els, value) {\n  forEach(els, el => {\n    const tagName = el.tagName;\n    const val = toValue(value);\n\n    switch (tagName === \"INPUT\" ? el.type : tagName) {\n      case \"text\":\n      case \"password\":\n      case \"TEXTAREA\":\n        if (el.value !== val + \"\") el.value = val;\n        break;\n      case \"checkbox\":\n        const elValue = el.getAttribute(\"value\") || \"on\";\n        el.checked = Array.isArray(val)\n          ? value.indexOf(elValue) >= 0\n          : val === elValue;\n        break;\n      case \"radio\":\n        // TODO\n        break;\n      case \"SELECT\":\n        var multiple = el.multiple && Array.isArray(val);\n\n        forEach(el.options, option => {\n          const optionValue = option.value || option.textContent;\n          option.selected = multiple\n            ? value.indexOf(optionValue) >= 0\n            : value + \"\" == optionValue;\n        });\n\n        break;\n    }\n  });\n}\n\nexport function toValue(value) {\n  if (value === null || value === undefined || value === false) return \"\";\n  if (value === true) return \"on\";\n  if (Array.isArray(value)) return value.map(toValue);\n  return value + \"\";\n}\n","import { forEach, map, parseEl, getWindow } from \"./util\";\n\nexport function setChildren(els, optionsArray, extraOptions) {\n  forEach(els, el => {\n    optionsArray.forEach((options, index) => {\n      setChild(el, options, { ...extraOptions, index });\n    });\n  });\n}\n\nexport function setChild(els, options, extraOptions) {\n  const o = {\n    ...(typeof options === \"string\" ? { html: options } : options),\n    ...extraOptions\n  };\n\n  const index = o.index || 0;\n  const tail = o.tail || 0;\n  const compat = o.compatible || compatible;\n\n  forEach(els, el => {\n    const { Event, CustomEvent } = getWindow(el);\n    const proto = o.proto || (o.html && getProto(o.html, el));\n    const maxIndex = el.children.length - tail;\n\n    if (index > maxIndex) {\n      throw new Error(\n        `Cannot render child element at index ${index} of ${\n          el.children.length\n        } children and tail ${tail}`\n      );\n    }\n\n    // reconciliation\n    const childAtIndex = el.children[index];\n    let child;\n\n    if (!proto) {\n      // if no prototype element was given,\n      // there must be an existing child to init/update\n      if (!childAtIndex) {\n        throw new Error(\n          `Cannot render new child element at index ${index} without base html`\n        );\n      }\n\n      child = childAtIndex;\n    } else if (index === maxIndex) {\n      // otherwise if index is maxIndex, must insert\n      child = cloneProto(proto);\n      el.insertBefore(child, childAtIndex);\n    } else if (!compat(childAtIndex, proto)) {\n      // otherwise, index < maxIndex <= el.children.length is guaranteed,\n      // so childAtIndex is too;\n      // must replace unless existing child is compatible\n      // also send destroy event to existing child\n      child = cloneProto(proto);\n      childAtIndex.dispatchEvent(\n        new Event(\"destroy\", {\n          bubbles: false\n        })\n      );\n      el.replaceChild(child, childAtIndex);\n    } else {\n      // finally, if child is compatible with prototype, dont insert/replace,\n      // just init and update existing child\n      child = childAtIndex;\n    }\n\n    // init child once\n    if (o.init && !child.__init) {\n      child.__init = true;\n      o.init(child);\n    }\n\n    // pass data, if any\n    if (o.data) {\n      child.dispatchEvent(\n        new CustomEvent(\"data\", {\n          detail: o.data,\n          bubbles: false\n        })\n      );\n    }\n  });\n}\n\nexport function setText(els, text) {\n  forEach(els, el => {\n    if (el.__text !== text) {\n      el.__text = text;\n      // safe guard if setText() and setHtml() are used on the same element\n      el.__html = {};\n      el.innerText = text;\n    }\n  });\n}\n\nexport function setHtml(els, html) {\n  forEach(els, el => {\n    if (el.__html !== html) {\n      el.__html = html;\n      // see above\n      el.__text = {};\n      el.innerHTML = html;\n    }\n  });\n}\n\nexport function setAttr(els, name, value) {\n  forEach(els, el => {\n    if (!el.__attr) el.__attr = {};\n    if (!el.__attr.hasOwnProperty(name) || el.__attr[name] !== value) {\n      el.__attr[name] = value;\n      if (typeof value === \"undefined\" || value === null) {\n        el.removeAttribute(name, value);\n      } else {\n        el.setAttribute(name, value);\n      }\n    }\n  });\n}\n\nexport function setClass(els, classNames, condition) {\n  const list = classNames.split(/\\s+/g);\n\n  forEach(els, el => {\n    let changed = false;\n    const result = el.className.split(/\\s+/g).filter(className => !!className);\n    list.forEach(className => {\n      const index = result.indexOf(className);\n      if (condition && index === -1) {\n        result.push(className);\n        changed = true;\n      } else if (!condition && index >= 0) {\n        result.splice(index, 1);\n        changed = true;\n      }\n    });\n    if (changed) el.className = result.join(\" \");\n  });\n}\n\n//\n\nfunction compatible(el, proto) {\n  return (\n    el.__proto === proto ||\n    (el.tagName === proto.tagName && el.className === proto.className)\n  );\n}\n\nfunction cloneProto(proto) {\n  const el = proto.cloneNode(true);\n  el.__proto = proto;\n\n  return el;\n}\n\nconst protoCache = new Map();\n\nfunction getProto(html, context) {\n  let proto = protoCache.get(html);\n  if (!proto) {\n    proto = parseEl(html, context);\n    protoCache.set(html, proto);\n  }\n\n  return proto;\n}\n","export * from \"./events\";\nexport * from \"./forms\";\nexport * from \"./render\";\nexport * from \"./util\";\n"]}